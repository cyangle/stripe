#  Stripe API
#
# The Stripe REST API. Please see https://stripe.com/docs/api for more details.
#
# The version of the OpenAPI document: 2024-06-20
# Contact: dev-platform@stripe.com
# Generated by: https://openapi-generator.tech
#

require "../../core"

require "../models/automatic_payment_methods_param"
require "../models/error"
require "../models/get_accounts_created_parameter"

require "../models/payment_flows_setup_intent_list"
require "../models/payment_method_data_params"
require "../models/payment_method_options_param"
require "../models/post_accounts_request_metadata"
require "../models/post_payment_intents_intent_confirm_request_mandate_data"
require "../models/post_setup_intents_request_mandate_data"
require "../models/setup_intent"
require "../models/setup_intent_single_use_params"

module Stripe
  class SetupIntentsApi
    property api_client : ApiClient

    delegate client_side_validation?, debugging?, to: @api_client.config

    def initialize(api_client = ApiClient.default)
      @api_client = api_client
    end

    # <p>Returns a list of SetupIntents.</p>
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param created [Stripe::GetAccountsCreatedParameter?] A filter on the list, based on the object `created` field. The value can be a string with an integer Unix timestamp, or it can be a dictionary with a number of different query options.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param attach_to_self [Bool?] If present, the SetupIntent's payment method will be attached to the in-context Stripe Account.  It can only be used for this Stripe Account’s own money movement flows like InboundTransfer and OutboundTransfers. It cannot be set to true when setting up a PaymentMethod for a Customer, and defaults to false when attaching a PaymentMethod to a Customer.
    # @optional @param customer [String?] Only return SetupIntents for the customer specified by this customer ID.
    # @optional @param payment_method [String?] Only return SetupIntents that associate with the specified payment method.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Stripe::PaymentFlowsSetupIntentList]
    def get_setup_intents(
      *,
      ending_before : String? = nil,
      starting_after : String? = nil,
      created : Stripe::GetAccountsCreatedParameter? = nil,
      limit : Int64? = nil,
      attach_to_self : Bool? = nil,
      customer : String? = nil,
      payment_method : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Stripe::PaymentFlowsSetupIntentList
      data, _status_code, _headers = get_setup_intents_with_http_info(ending_before: ending_before, starting_after: starting_after, created: created, limit: limit, attach_to_self: attach_to_self, customer: customer, payment_method: payment_method, expand: expand)
      data
    end

    # &lt;p&gt;Returns a list of SetupIntents.&lt;/p&gt;
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param created [Stripe::GetAccountsCreatedParameter?] A filter on the list, based on the object `created` field. The value can be a string with an integer Unix timestamp, or it can be a dictionary with a number of different query options.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param attach_to_self [Bool?] If present, the SetupIntent's payment method will be attached to the in-context Stripe Account.  It can only be used for this Stripe Account’s own money movement flows like InboundTransfer and OutboundTransfers. It cannot be set to true when setting up a PaymentMethod for a Customer, and defaults to false when attaching a PaymentMethod to a Customer.
    # @optional @param customer [String?] Only return SetupIntents for the customer specified by this customer ID.
    # @optional @param payment_method [String?] Only return SetupIntents that associate with the specified payment method.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Tuple(Stripe::PaymentFlowsSetupIntentList, Integer, Hash)] Stripe::PaymentFlowsSetupIntentList, response status code and response headers
    def get_setup_intents_with_http_info(
      *,
      ending_before : String? = nil,
      starting_after : String? = nil,
      created : Stripe::GetAccountsCreatedParameter? = nil,
      limit : Int64? = nil,
      attach_to_self : Bool? = nil,
      customer : String? = nil,
      payment_method : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Tuple(Stripe::PaymentFlowsSetupIntentList, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_setup_intents(ending_before: ending_before, starting_after: starting_after, created: created, limit: limit, attach_to_self: attach_to_self, customer: customer, payment_method: payment_method, expand: expand)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging?
        Log.debug { "API called: SetupIntentsApi#get_setup_intents\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::PaymentFlowsSetupIntentList.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Returns a list of SetupIntents.&lt;/p&gt;
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param created [Stripe::GetAccountsCreatedParameter?] A filter on the list, based on the object `created` field. The value can be a string with an integer Unix timestamp, or it can be a dictionary with a number of different query options.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param attach_to_self [Bool?] If present, the SetupIntent's payment method will be attached to the in-context Stripe Account.  It can only be used for this Stripe Account’s own money movement flows like InboundTransfer and OutboundTransfers. It cannot be set to true when setting up a PaymentMethod for a Customer, and defaults to false when attaching a PaymentMethod to a Customer.
    # @optional @param customer [String?] Only return SetupIntents for the customer specified by this customer ID.
    # @optional @param payment_method [String?] Only return SetupIntents that associate with the specified payment method.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return nil
    def get_setup_intents(
      *,
      ending_before : String? = nil,
      starting_after : String? = nil,
      created : Stripe::GetAccountsCreatedParameter? = nil,
      limit : Int64? = nil,
      attach_to_self : Bool? = nil,
      customer : String? = nil,
      payment_method : String? = nil,
      expand : Array(Array(String))? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_get_setup_intents(ending_before: ending_before, starting_after: starting_after, created: created, limit: limit, attach_to_self: attach_to_self, customer: customer, payment_method: payment_method, expand: expand).execute(&block)
    end

    GET_SETUP_INTENTS_MAX_LENGTH_FOR_ENDING_BEFORE  = 5000
    GET_SETUP_INTENTS_MAX_LENGTH_FOR_STARTING_AFTER = 5000
    GET_SETUP_INTENTS_MAX_LENGTH_FOR_CUSTOMER       = 5000
    GET_SETUP_INTENTS_MAX_LENGTH_FOR_PAYMENT_METHOD = 5000

    # @return Crest::Request
    def build_api_request_for_get_setup_intents(
      *,
      ending_before : String? = nil,
      starting_after : String? = nil,
      created : Stripe::GetAccountsCreatedParameter? = nil,
      limit : Int64? = nil,
      attach_to_self : Bool? = nil,
      customer : String? = nil,
      payment_method : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Crest::Request
      if debugging?
        Log.debug { "Calling API: SetupIntentsApi.get_setup_intents ..." }
      end

      if client_side_validation?
        unless (_ending_before = ending_before).nil?
          OpenApi::PrimitiveValidator.validate_max_length("ending_before", ending_before.to_s.size, GET_SETUP_INTENTS_MAX_LENGTH_FOR_ENDING_BEFORE)
        end
        unless (_starting_after = starting_after).nil?
          OpenApi::PrimitiveValidator.validate_max_length("starting_after", starting_after.to_s.size, GET_SETUP_INTENTS_MAX_LENGTH_FOR_STARTING_AFTER)
        end
        unless (_created = created).nil?
          _created.validate if _created.is_a?(OpenApi::Validatable)
        end

        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, GET_SETUP_INTENTS_MAX_LENGTH_FOR_CUSTOMER)
        end
        unless (_payment_method = payment_method).nil?
          OpenApi::PrimitiveValidator.validate_max_length("payment_method", payment_method.to_s.size, GET_SETUP_INTENTS_MAX_LENGTH_FOR_PAYMENT_METHOD)
        end
      end

      # resource path
      local_var_path = "/v1/setup_intents"

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new
      query_params["ending_before"] = ending_before.to_s if !ending_before.nil?
      query_params["starting_after"] = starting_after.to_s if !starting_after.nil?
      query_params["created"] = created.to_s if !created.nil?
      query_params["limit"] = limit.to_s if !limit.nil?
      query_params["attach_to_self"] = attach_to_self.to_s if !attach_to_self.nil?
      query_params["customer"] = customer.to_s if !customer.nil?
      query_params["payment_method"] = payment_method.to_s if !payment_method.nil?
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "SetupIntentsApi.get_setup_intents",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Retrieves the details of a SetupIntent that has previously been created. </p>  <p>Client-side retrieval using a publishable key is allowed when the <code>client_secret</code> is provided in the query string. </p>  <p>When retrieved with a publishable key, only a subset of properties will be returned. Please refer to the <a href=\"#setup_intent_object\">SetupIntent</a> object reference for more details.</p>
    # @required @param intent [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @optional @param client_secret [String?] The client secret of the SetupIntent. We require this string if you use a publishable key to retrieve the SetupIntent.
    # @return [Stripe::SetupIntent]
    def get_setup_intents_intent(
      *,
      intent : String? = nil,
      expand : Array(Array(String))? = nil,
      client_secret : String? = nil
    ) : Stripe::SetupIntent
      data, _status_code, _headers = get_setup_intents_intent_with_http_info(intent: intent, expand: expand, client_secret: client_secret)
      data
    end

    # &lt;p&gt;Retrieves the details of a SetupIntent that has previously been created. &lt;/p&gt;  &lt;p&gt;Client-side retrieval using a publishable key is allowed when the &lt;code&gt;client_secret&lt;/code&gt; is provided in the query string. &lt;/p&gt;  &lt;p&gt;When retrieved with a publishable key, only a subset of properties will be returned. Please refer to the &lt;a href&#x3D;\&quot;#setup_intent_object\&quot;&gt;SetupIntent&lt;/a&gt; object reference for more details.&lt;/p&gt;
    # @required @param intent [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @optional @param client_secret [String?] The client secret of the SetupIntent. We require this string if you use a publishable key to retrieve the SetupIntent.
    # @return [Tuple(Stripe::SetupIntent, Integer, Hash)] Stripe::SetupIntent, response status code and response headers
    def get_setup_intents_intent_with_http_info(
      *,
      intent : String? = nil,
      expand : Array(Array(String))? = nil,
      client_secret : String? = nil
    ) : Tuple(Stripe::SetupIntent, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_setup_intents_intent(intent: intent, expand: expand, client_secret: client_secret)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging?
        Log.debug { "API called: SetupIntentsApi#get_setup_intents_intent\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::SetupIntent.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Retrieves the details of a SetupIntent that has previously been created. &lt;/p&gt;  &lt;p&gt;Client-side retrieval using a publishable key is allowed when the &lt;code&gt;client_secret&lt;/code&gt; is provided in the query string. &lt;/p&gt;  &lt;p&gt;When retrieved with a publishable key, only a subset of properties will be returned. Please refer to the &lt;a href&#x3D;\&quot;#setup_intent_object\&quot;&gt;SetupIntent&lt;/a&gt; object reference for more details.&lt;/p&gt;
    # @required @param intent [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @optional @param client_secret [String?] The client secret of the SetupIntent. We require this string if you use a publishable key to retrieve the SetupIntent.
    # @return nil
    def get_setup_intents_intent(
      *,
      intent : String? = nil,
      expand : Array(Array(String))? = nil,
      client_secret : String? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_get_setup_intents_intent(intent: intent, expand: expand, client_secret: client_secret).execute(&block)
    end

    GET_SETUP_INTENTS_INTENT_MAX_LENGTH_FOR_INTENT        = 5000
    GET_SETUP_INTENTS_INTENT_MAX_LENGTH_FOR_CLIENT_SECRET = 5000

    # @return Crest::Request
    def build_api_request_for_get_setup_intents_intent(
      *,
      intent : String? = nil,
      expand : Array(Array(String))? = nil,
      client_secret : String? = nil
    ) : Crest::Request
      if debugging?
        Log.debug { "Calling API: SetupIntentsApi.get_setup_intents_intent ..." }
      end

      if client_side_validation?
        raise ArgumentError.new("\"intent\" is required and cannot be null") if intent.nil?
        unless (_intent = intent).nil?
          OpenApi::PrimitiveValidator.validate_max_length("intent", intent.to_s.size, GET_SETUP_INTENTS_INTENT_MAX_LENGTH_FOR_INTENT)
        end

        unless (_client_secret = client_secret).nil?
          OpenApi::PrimitiveValidator.validate_max_length("client_secret", client_secret.to_s.size, GET_SETUP_INTENTS_INTENT_MAX_LENGTH_FOR_CLIENT_SECRET)
        end
      end

      # resource path
      local_var_path = "/v1/setup_intents/{intent}".sub("{" + "intent" + "}", URI.encode_path(intent.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?
      query_params["client_secret"] = client_secret.to_s if !client_secret.nil?

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "SetupIntentsApi.get_setup_intents_intent",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Creates a SetupIntent object.</p>  <p>After you create the SetupIntent, attach a payment method and <a href=\"/docs/api/setup_intents/confirm\">confirm</a> it to collect any required permissions to charge the payment method later.</p>
    # @optional @param attach_to_self [Bool?] If present, the SetupIntent's payment method will be attached to the in-context Stripe Account.  It can only be used for this Stripe Account’s own money movement flows like InboundTransfer and OutboundTransfers. It cannot be set to true when setting up a PaymentMethod for a Customer, and defaults to false when attaching a PaymentMethod to a Customer.
    # @optional @param automatic_payment_methods [Stripe::AutomaticPaymentMethodsParam?]
    # @optional @param confirm [Bool?] Set to `true` to attempt to confirm this SetupIntent immediately. This parameter defaults to `false`. If a card is the attached payment method, you can provide a `return_url` in case further authentication is necessary.
    # @optional @param confirmation_token [String?] ID of the ConfirmationToken used to confirm this SetupIntent.  If the provided ConfirmationToken contains properties that are also being provided in this request, such as `payment_method`, then the values in this request will take precedence.
    # @optional @param customer [String?] ID of the Customer this SetupIntent belongs to, if one exists.  If present, the SetupIntent's payment method will be attached to the Customer on successful setup. Payment methods attached to other Customers cannot be used with this SetupIntent.
    # @optional @param description [String?] An arbitrary string attached to the object. Often useful for displaying to users.
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @optional @param flow_directions [Array(String)?] Indicates the directions of money movement for which this payment method is intended to be used.  Include `inbound` if you intend to use the payment method as the origin to pull funds from. Include `outbound` if you intend to use the payment method as the destination to send funds to. You can include both if you intend to use the payment method for both purposes.
    # @optional @param mandate_data [Stripe::PostSetupIntentsRequestMandateData?]
    # @optional @param metadata [Hash(String, String)?]
    # @optional @param on_behalf_of [String?] The Stripe account ID created for this SetupIntent.
    # @optional @param payment_method [String?] ID of the payment method (a PaymentMethod, Card, or saved Source object) to attach to this SetupIntent.
    # @optional @param payment_method_configuration [String?] The ID of the payment method configuration to use with this SetupIntent.
    # @optional @param payment_method_data [Stripe::PaymentMethodDataParams?]
    # @optional @param payment_method_options [Stripe::PaymentMethodOptionsParam?]
    # @optional @param payment_method_types [Array(String)?] The list of payment method types (for example, card) that this SetupIntent can use. If you don't provide this, it defaults to [\\\"card\\\"].
    # @optional @param return_url [String?] The URL to redirect your customer back to after they authenticate or cancel their payment on the payment method's app or site. To redirect to a mobile application, you can alternatively supply an application URI scheme. This parameter can only be used with [`confirm=true`](https://stripe.com/docs/api/setup_intents/create#create_setup_intent-confirm).
    # @optional @param single_use [Stripe::SetupIntentSingleUseParams?]
    # @optional @param usage [String?] Indicates how the payment method is intended to be used in the future. If not provided, this value defaults to `off_session`.
    # @optional @param use_stripe_sdk [Bool?] Set to `true` when confirming server-side and using Stripe.js, iOS, or Android client-side SDKs to handle the next actions.
    # @return [Stripe::SetupIntent]
    def post_setup_intents(
      *,
      attach_to_self : Bool? = nil,
      automatic_payment_methods : Stripe::AutomaticPaymentMethodsParam? = nil,
      confirm : Bool? = nil,
      confirmation_token : String? = nil,
      customer : String? = nil,
      description : String? = nil,
      expand : Array(String)? = nil,
      flow_directions : Array(String)? = nil,
      mandate_data : Stripe::PostSetupIntentsRequestMandateData? = nil,
      metadata : Hash(String, String)? = nil,
      on_behalf_of : String? = nil,
      payment_method : String? = nil,
      payment_method_configuration : String? = nil,
      payment_method_data : Stripe::PaymentMethodDataParams? = nil,
      payment_method_options : Stripe::PaymentMethodOptionsParam? = nil,
      payment_method_types : Array(String)? = nil,
      return_url : String? = nil,
      single_use : Stripe::SetupIntentSingleUseParams? = nil,
      usage : String? = nil,
      use_stripe_sdk : Bool? = nil
    ) : Stripe::SetupIntent
      data, _status_code, _headers = post_setup_intents_with_http_info(attach_to_self: attach_to_self, automatic_payment_methods: automatic_payment_methods, confirm: confirm, confirmation_token: confirmation_token, customer: customer, description: description, expand: expand, flow_directions: flow_directions, mandate_data: mandate_data, metadata: metadata, on_behalf_of: on_behalf_of, payment_method: payment_method, payment_method_configuration: payment_method_configuration, payment_method_data: payment_method_data, payment_method_options: payment_method_options, payment_method_types: payment_method_types, return_url: return_url, single_use: single_use, usage: usage, use_stripe_sdk: use_stripe_sdk)
      data
    end

    # &lt;p&gt;Creates a SetupIntent object.&lt;/p&gt;  &lt;p&gt;After you create the SetupIntent, attach a payment method and &lt;a href&#x3D;\&quot;/docs/api/setup_intents/confirm\&quot;&gt;confirm&lt;/a&gt; it to collect any required permissions to charge the payment method later.&lt;/p&gt;
    # @optional @param attach_to_self [Bool?] If present, the SetupIntent's payment method will be attached to the in-context Stripe Account.  It can only be used for this Stripe Account’s own money movement flows like InboundTransfer and OutboundTransfers. It cannot be set to true when setting up a PaymentMethod for a Customer, and defaults to false when attaching a PaymentMethod to a Customer.
    # @optional @param automatic_payment_methods [Stripe::AutomaticPaymentMethodsParam?]
    # @optional @param confirm [Bool?] Set to `true` to attempt to confirm this SetupIntent immediately. This parameter defaults to `false`. If a card is the attached payment method, you can provide a `return_url` in case further authentication is necessary.
    # @optional @param confirmation_token [String?] ID of the ConfirmationToken used to confirm this SetupIntent.  If the provided ConfirmationToken contains properties that are also being provided in this request, such as `payment_method`, then the values in this request will take precedence.
    # @optional @param customer [String?] ID of the Customer this SetupIntent belongs to, if one exists.  If present, the SetupIntent's payment method will be attached to the Customer on successful setup. Payment methods attached to other Customers cannot be used with this SetupIntent.
    # @optional @param description [String?] An arbitrary string attached to the object. Often useful for displaying to users.
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @optional @param flow_directions [Array(String)?] Indicates the directions of money movement for which this payment method is intended to be used.  Include `inbound` if you intend to use the payment method as the origin to pull funds from. Include `outbound` if you intend to use the payment method as the destination to send funds to. You can include both if you intend to use the payment method for both purposes.
    # @optional @param mandate_data [Stripe::PostSetupIntentsRequestMandateData?]
    # @optional @param metadata [Hash(String, String)?]
    # @optional @param on_behalf_of [String?] The Stripe account ID created for this SetupIntent.
    # @optional @param payment_method [String?] ID of the payment method (a PaymentMethod, Card, or saved Source object) to attach to this SetupIntent.
    # @optional @param payment_method_configuration [String?] The ID of the payment method configuration to use with this SetupIntent.
    # @optional @param payment_method_data [Stripe::PaymentMethodDataParams?]
    # @optional @param payment_method_options [Stripe::PaymentMethodOptionsParam?]
    # @optional @param payment_method_types [Array(String)?] The list of payment method types (for example, card) that this SetupIntent can use. If you don't provide this, it defaults to [\\\"card\\\"].
    # @optional @param return_url [String?] The URL to redirect your customer back to after they authenticate or cancel their payment on the payment method's app or site. To redirect to a mobile application, you can alternatively supply an application URI scheme. This parameter can only be used with [`confirm=true`](https://stripe.com/docs/api/setup_intents/create#create_setup_intent-confirm).
    # @optional @param single_use [Stripe::SetupIntentSingleUseParams?]
    # @optional @param usage [String?] Indicates how the payment method is intended to be used in the future. If not provided, this value defaults to `off_session`.
    # @optional @param use_stripe_sdk [Bool?] Set to `true` when confirming server-side and using Stripe.js, iOS, or Android client-side SDKs to handle the next actions.
    # @return [Tuple(Stripe::SetupIntent, Integer, Hash)] Stripe::SetupIntent, response status code and response headers
    def post_setup_intents_with_http_info(
      *,
      attach_to_self : Bool? = nil,
      automatic_payment_methods : Stripe::AutomaticPaymentMethodsParam? = nil,
      confirm : Bool? = nil,
      confirmation_token : String? = nil,
      customer : String? = nil,
      description : String? = nil,
      expand : Array(String)? = nil,
      flow_directions : Array(String)? = nil,
      mandate_data : Stripe::PostSetupIntentsRequestMandateData? = nil,
      metadata : Hash(String, String)? = nil,
      on_behalf_of : String? = nil,
      payment_method : String? = nil,
      payment_method_configuration : String? = nil,
      payment_method_data : Stripe::PaymentMethodDataParams? = nil,
      payment_method_options : Stripe::PaymentMethodOptionsParam? = nil,
      payment_method_types : Array(String)? = nil,
      return_url : String? = nil,
      single_use : Stripe::SetupIntentSingleUseParams? = nil,
      usage : String? = nil,
      use_stripe_sdk : Bool? = nil
    ) : Tuple(Stripe::SetupIntent, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_post_setup_intents(attach_to_self: attach_to_self, automatic_payment_methods: automatic_payment_methods, confirm: confirm, confirmation_token: confirmation_token, customer: customer, description: description, expand: expand, flow_directions: flow_directions, mandate_data: mandate_data, metadata: metadata, on_behalf_of: on_behalf_of, payment_method: payment_method, payment_method_configuration: payment_method_configuration, payment_method_data: payment_method_data, payment_method_options: payment_method_options, payment_method_types: payment_method_types, return_url: return_url, single_use: single_use, usage: usage, use_stripe_sdk: use_stripe_sdk)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging?
        Log.debug { "API called: SetupIntentsApi#post_setup_intents\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::SetupIntent.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Creates a SetupIntent object.&lt;/p&gt;  &lt;p&gt;After you create the SetupIntent, attach a payment method and &lt;a href&#x3D;\&quot;/docs/api/setup_intents/confirm\&quot;&gt;confirm&lt;/a&gt; it to collect any required permissions to charge the payment method later.&lt;/p&gt;
    # @optional @param attach_to_self [Bool?] If present, the SetupIntent's payment method will be attached to the in-context Stripe Account.  It can only be used for this Stripe Account’s own money movement flows like InboundTransfer and OutboundTransfers. It cannot be set to true when setting up a PaymentMethod for a Customer, and defaults to false when attaching a PaymentMethod to a Customer.
    # @optional @param automatic_payment_methods [Stripe::AutomaticPaymentMethodsParam?]
    # @optional @param confirm [Bool?] Set to `true` to attempt to confirm this SetupIntent immediately. This parameter defaults to `false`. If a card is the attached payment method, you can provide a `return_url` in case further authentication is necessary.
    # @optional @param confirmation_token [String?] ID of the ConfirmationToken used to confirm this SetupIntent.  If the provided ConfirmationToken contains properties that are also being provided in this request, such as `payment_method`, then the values in this request will take precedence.
    # @optional @param customer [String?] ID of the Customer this SetupIntent belongs to, if one exists.  If present, the SetupIntent's payment method will be attached to the Customer on successful setup. Payment methods attached to other Customers cannot be used with this SetupIntent.
    # @optional @param description [String?] An arbitrary string attached to the object. Often useful for displaying to users.
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @optional @param flow_directions [Array(String)?] Indicates the directions of money movement for which this payment method is intended to be used.  Include `inbound` if you intend to use the payment method as the origin to pull funds from. Include `outbound` if you intend to use the payment method as the destination to send funds to. You can include both if you intend to use the payment method for both purposes.
    # @optional @param mandate_data [Stripe::PostSetupIntentsRequestMandateData?]
    # @optional @param metadata [Hash(String, String)?]
    # @optional @param on_behalf_of [String?] The Stripe account ID created for this SetupIntent.
    # @optional @param payment_method [String?] ID of the payment method (a PaymentMethod, Card, or saved Source object) to attach to this SetupIntent.
    # @optional @param payment_method_configuration [String?] The ID of the payment method configuration to use with this SetupIntent.
    # @optional @param payment_method_data [Stripe::PaymentMethodDataParams?]
    # @optional @param payment_method_options [Stripe::PaymentMethodOptionsParam?]
    # @optional @param payment_method_types [Array(String)?] The list of payment method types (for example, card) that this SetupIntent can use. If you don't provide this, it defaults to [\\\"card\\\"].
    # @optional @param return_url [String?] The URL to redirect your customer back to after they authenticate or cancel their payment on the payment method's app or site. To redirect to a mobile application, you can alternatively supply an application URI scheme. This parameter can only be used with [`confirm=true`](https://stripe.com/docs/api/setup_intents/create#create_setup_intent-confirm).
    # @optional @param single_use [Stripe::SetupIntentSingleUseParams?]
    # @optional @param usage [String?] Indicates how the payment method is intended to be used in the future. If not provided, this value defaults to `off_session`.
    # @optional @param use_stripe_sdk [Bool?] Set to `true` when confirming server-side and using Stripe.js, iOS, or Android client-side SDKs to handle the next actions.
    # @return nil
    def post_setup_intents(
      *,
      attach_to_self : Bool? = nil,
      automatic_payment_methods : Stripe::AutomaticPaymentMethodsParam? = nil,
      confirm : Bool? = nil,
      confirmation_token : String? = nil,
      customer : String? = nil,
      description : String? = nil,
      expand : Array(String)? = nil,
      flow_directions : Array(String)? = nil,
      mandate_data : Stripe::PostSetupIntentsRequestMandateData? = nil,
      metadata : Hash(String, String)? = nil,
      on_behalf_of : String? = nil,
      payment_method : String? = nil,
      payment_method_configuration : String? = nil,
      payment_method_data : Stripe::PaymentMethodDataParams? = nil,
      payment_method_options : Stripe::PaymentMethodOptionsParam? = nil,
      payment_method_types : Array(String)? = nil,
      return_url : String? = nil,
      single_use : Stripe::SetupIntentSingleUseParams? = nil,
      usage : String? = nil,
      use_stripe_sdk : Bool? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_post_setup_intents(attach_to_self: attach_to_self, automatic_payment_methods: automatic_payment_methods, confirm: confirm, confirmation_token: confirmation_token, customer: customer, description: description, expand: expand, flow_directions: flow_directions, mandate_data: mandate_data, metadata: metadata, on_behalf_of: on_behalf_of, payment_method: payment_method, payment_method_configuration: payment_method_configuration, payment_method_data: payment_method_data, payment_method_options: payment_method_options, payment_method_types: payment_method_types, return_url: return_url, single_use: single_use, usage: usage, use_stripe_sdk: use_stripe_sdk).execute(&block)
    end

    POST_SETUP_INTENTS_MAX_LENGTH_FOR_CONFIRMATION_TOKEN           = 5000
    POST_SETUP_INTENTS_MAX_LENGTH_FOR_CUSTOMER                     = 5000
    POST_SETUP_INTENTS_MAX_LENGTH_FOR_DESCRIPTION                  = 1000
    POST_SETUP_INTENTS_VALID_VALUES_FOR_FLOW_DIRECTIONS            = String.static_array("inbound", "outbound")
    POST_SETUP_INTENTS_MAX_LENGTH_FOR_PAYMENT_METHOD               = 5000
    POST_SETUP_INTENTS_MAX_LENGTH_FOR_PAYMENT_METHOD_CONFIGURATION =  100
    POST_SETUP_INTENTS_VALID_VALUES_FOR_USAGE                      = String.static_array("off_session", "on_session")

    # @return Crest::Request
    def build_api_request_for_post_setup_intents(
      *,
      attach_to_self : Bool? = nil,
      automatic_payment_methods : Stripe::AutomaticPaymentMethodsParam? = nil,
      confirm : Bool? = nil,
      confirmation_token : String? = nil,
      customer : String? = nil,
      description : String? = nil,
      expand : Array(String)? = nil,
      flow_directions : Array(String)? = nil,
      mandate_data : Stripe::PostSetupIntentsRequestMandateData? = nil,
      metadata : Hash(String, String)? = nil,
      on_behalf_of : String? = nil,
      payment_method : String? = nil,
      payment_method_configuration : String? = nil,
      payment_method_data : Stripe::PaymentMethodDataParams? = nil,
      payment_method_options : Stripe::PaymentMethodOptionsParam? = nil,
      payment_method_types : Array(String)? = nil,
      return_url : String? = nil,
      single_use : Stripe::SetupIntentSingleUseParams? = nil,
      usage : String? = nil,
      use_stripe_sdk : Bool? = nil
    ) : Crest::Request
      if debugging?
        Log.debug { "Calling API: SetupIntentsApi.post_setup_intents ..." }
      end

      if client_side_validation?
        unless (_automatic_payment_methods = automatic_payment_methods).nil?
          _automatic_payment_methods.validate if _automatic_payment_methods.is_a?(OpenApi::Validatable)
        end

        unless (_confirmation_token = confirmation_token).nil?
          OpenApi::PrimitiveValidator.validate_max_length("confirmation_token", confirmation_token.to_s.size, POST_SETUP_INTENTS_MAX_LENGTH_FOR_CONFIRMATION_TOKEN)
        end
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, POST_SETUP_INTENTS_MAX_LENGTH_FOR_CUSTOMER)
        end
        unless (_description = description).nil?
          OpenApi::PrimitiveValidator.validate_max_length("description", description.to_s.size, POST_SETUP_INTENTS_MAX_LENGTH_FOR_DESCRIPTION)
        end

        unless (_flow_directions = flow_directions).nil?
          OpenApi::EnumValidator.validate("flow_directions", _flow_directions, POST_SETUP_INTENTS_VALID_VALUES_FOR_FLOW_DIRECTIONS)
        end
        unless (_mandate_data = mandate_data).nil?
          _mandate_data.validate if _mandate_data.is_a?(OpenApi::Validatable)
        end

        unless (_payment_method = payment_method).nil?
          OpenApi::PrimitiveValidator.validate_max_length("payment_method", payment_method.to_s.size, POST_SETUP_INTENTS_MAX_LENGTH_FOR_PAYMENT_METHOD)
        end
        unless (_payment_method_configuration = payment_method_configuration).nil?
          OpenApi::PrimitiveValidator.validate_max_length("payment_method_configuration", payment_method_configuration.to_s.size, POST_SETUP_INTENTS_MAX_LENGTH_FOR_PAYMENT_METHOD_CONFIGURATION)
        end
        unless (_payment_method_data = payment_method_data).nil?
          _payment_method_data.validate if _payment_method_data.is_a?(OpenApi::Validatable)
        end
        unless (_payment_method_options = payment_method_options).nil?
          _payment_method_options.validate if _payment_method_options.is_a?(OpenApi::Validatable)
        end

        unless (_single_use = single_use).nil?
          _single_use.validate if _single_use.is_a?(OpenApi::Validatable)
        end
        unless (_usage = usage).nil?
          OpenApi::EnumValidator.validate("usage", _usage, POST_SETUP_INTENTS_VALID_VALUES_FOR_USAGE)
        end
      end

      # resource path
      local_var_path = "/v1/setup_intents"

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = Array(Tuple(String, Crest::ParamsValue)).new
      form_params << Tuple(String, Crest::ParamsValue).new("attach_to_self", attach_to_self.to_s) if !attach_to_self.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(automatic_payment_methods.to_json), "automatic_payment_methods")) if !automatic_payment_methods.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("confirm", confirm.to_s) if !confirm.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("confirmation_token", confirmation_token.to_s) if !confirmation_token.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("customer", customer.to_s) if !customer.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("description", description.to_s) if !description.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(expand.to_json), "expand")) if !expand.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(flow_directions.to_json), "flow_directions")) if !flow_directions.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(mandate_data.to_json), "mandate_data")) if !mandate_data.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(metadata.to_json), "metadata")) if !metadata.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("on_behalf_of", on_behalf_of.to_s) if !on_behalf_of.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("payment_method", payment_method.to_s) if !payment_method.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("payment_method_configuration", payment_method_configuration.to_s) if !payment_method_configuration.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(payment_method_data.to_json), "payment_method_data")) if !payment_method_data.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(payment_method_options.to_json), "payment_method_options")) if !payment_method_options.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(payment_method_types.to_json), "payment_method_types")) if !payment_method_types.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("return_url", return_url.to_s) if !return_url.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(single_use.to_json), "single_use")) if !single_use.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("usage", usage.to_s) if !usage.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("use_stripe_sdk", use_stripe_sdk.to_s) if !use_stripe_sdk.nil?

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"POST",
        path: local_var_path,
        operation: "SetupIntentsApi.post_setup_intents",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Updates a SetupIntent object.</p>
    # @required @param intent [String?]
    # @optional @param attach_to_self [Bool?] If present, the SetupIntent's payment method will be attached to the in-context Stripe Account.  It can only be used for this Stripe Account’s own money movement flows like InboundTransfer and OutboundTransfers. It cannot be set to true when setting up a PaymentMethod for a Customer, and defaults to false when attaching a PaymentMethod to a Customer.
    # @optional @param customer [String?] ID of the Customer this SetupIntent belongs to, if one exists.  If present, the SetupIntent's payment method will be attached to the Customer on successful setup. Payment methods attached to other Customers cannot be used with this SetupIntent.
    # @optional @param description [String?] An arbitrary string attached to the object. Often useful for displaying to users.
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @optional @param flow_directions [Array(String)?] Indicates the directions of money movement for which this payment method is intended to be used.  Include `inbound` if you intend to use the payment method as the origin to pull funds from. Include `outbound` if you intend to use the payment method as the destination to send funds to. You can include both if you intend to use the payment method for both purposes.
    # @optional @param metadata [Stripe::PostAccountsRequestMetadata?]
    # @optional @param payment_method [String?] ID of the payment method (a PaymentMethod, Card, or saved Source object) to attach to this SetupIntent. To unset this field to null, pass in an empty string.
    # @optional @param payment_method_configuration [String?] The ID of the payment method configuration to use with this SetupIntent.
    # @optional @param payment_method_data [Stripe::PaymentMethodDataParams?]
    # @optional @param payment_method_options [Stripe::PaymentMethodOptionsParam?]
    # @optional @param payment_method_types [Array(String)?] The list of payment method types (for example, card) that this SetupIntent can set up. If you don't provide this array, it defaults to [\\\"card\\\"].
    # @return [Stripe::SetupIntent]
    def post_setup_intents_intent(
      *,
      intent : String? = nil,
      attach_to_self : Bool? = nil,
      customer : String? = nil,
      description : String? = nil,
      expand : Array(String)? = nil,
      flow_directions : Array(String)? = nil,
      metadata : Stripe::PostAccountsRequestMetadata? = nil,
      payment_method : String? = nil,
      payment_method_configuration : String? = nil,
      payment_method_data : Stripe::PaymentMethodDataParams? = nil,
      payment_method_options : Stripe::PaymentMethodOptionsParam? = nil,
      payment_method_types : Array(String)? = nil
    ) : Stripe::SetupIntent
      data, _status_code, _headers = post_setup_intents_intent_with_http_info(intent: intent, attach_to_self: attach_to_self, customer: customer, description: description, expand: expand, flow_directions: flow_directions, metadata: metadata, payment_method: payment_method, payment_method_configuration: payment_method_configuration, payment_method_data: payment_method_data, payment_method_options: payment_method_options, payment_method_types: payment_method_types)
      data
    end

    # &lt;p&gt;Updates a SetupIntent object.&lt;/p&gt;
    # @required @param intent [String?]
    # @optional @param attach_to_self [Bool?] If present, the SetupIntent's payment method will be attached to the in-context Stripe Account.  It can only be used for this Stripe Account’s own money movement flows like InboundTransfer and OutboundTransfers. It cannot be set to true when setting up a PaymentMethod for a Customer, and defaults to false when attaching a PaymentMethod to a Customer.
    # @optional @param customer [String?] ID of the Customer this SetupIntent belongs to, if one exists.  If present, the SetupIntent's payment method will be attached to the Customer on successful setup. Payment methods attached to other Customers cannot be used with this SetupIntent.
    # @optional @param description [String?] An arbitrary string attached to the object. Often useful for displaying to users.
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @optional @param flow_directions [Array(String)?] Indicates the directions of money movement for which this payment method is intended to be used.  Include `inbound` if you intend to use the payment method as the origin to pull funds from. Include `outbound` if you intend to use the payment method as the destination to send funds to. You can include both if you intend to use the payment method for both purposes.
    # @optional @param metadata [Stripe::PostAccountsRequestMetadata?]
    # @optional @param payment_method [String?] ID of the payment method (a PaymentMethod, Card, or saved Source object) to attach to this SetupIntent. To unset this field to null, pass in an empty string.
    # @optional @param payment_method_configuration [String?] The ID of the payment method configuration to use with this SetupIntent.
    # @optional @param payment_method_data [Stripe::PaymentMethodDataParams?]
    # @optional @param payment_method_options [Stripe::PaymentMethodOptionsParam?]
    # @optional @param payment_method_types [Array(String)?] The list of payment method types (for example, card) that this SetupIntent can set up. If you don't provide this array, it defaults to [\\\"card\\\"].
    # @return [Tuple(Stripe::SetupIntent, Integer, Hash)] Stripe::SetupIntent, response status code and response headers
    def post_setup_intents_intent_with_http_info(
      *,
      intent : String? = nil,
      attach_to_self : Bool? = nil,
      customer : String? = nil,
      description : String? = nil,
      expand : Array(String)? = nil,
      flow_directions : Array(String)? = nil,
      metadata : Stripe::PostAccountsRequestMetadata? = nil,
      payment_method : String? = nil,
      payment_method_configuration : String? = nil,
      payment_method_data : Stripe::PaymentMethodDataParams? = nil,
      payment_method_options : Stripe::PaymentMethodOptionsParam? = nil,
      payment_method_types : Array(String)? = nil
    ) : Tuple(Stripe::SetupIntent, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_post_setup_intents_intent(intent: intent, attach_to_self: attach_to_self, customer: customer, description: description, expand: expand, flow_directions: flow_directions, metadata: metadata, payment_method: payment_method, payment_method_configuration: payment_method_configuration, payment_method_data: payment_method_data, payment_method_options: payment_method_options, payment_method_types: payment_method_types)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging?
        Log.debug { "API called: SetupIntentsApi#post_setup_intents_intent\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::SetupIntent.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Updates a SetupIntent object.&lt;/p&gt;
    # @required @param intent [String?]
    # @optional @param attach_to_self [Bool?] If present, the SetupIntent's payment method will be attached to the in-context Stripe Account.  It can only be used for this Stripe Account’s own money movement flows like InboundTransfer and OutboundTransfers. It cannot be set to true when setting up a PaymentMethod for a Customer, and defaults to false when attaching a PaymentMethod to a Customer.
    # @optional @param customer [String?] ID of the Customer this SetupIntent belongs to, if one exists.  If present, the SetupIntent's payment method will be attached to the Customer on successful setup. Payment methods attached to other Customers cannot be used with this SetupIntent.
    # @optional @param description [String?] An arbitrary string attached to the object. Often useful for displaying to users.
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @optional @param flow_directions [Array(String)?] Indicates the directions of money movement for which this payment method is intended to be used.  Include `inbound` if you intend to use the payment method as the origin to pull funds from. Include `outbound` if you intend to use the payment method as the destination to send funds to. You can include both if you intend to use the payment method for both purposes.
    # @optional @param metadata [Stripe::PostAccountsRequestMetadata?]
    # @optional @param payment_method [String?] ID of the payment method (a PaymentMethod, Card, or saved Source object) to attach to this SetupIntent. To unset this field to null, pass in an empty string.
    # @optional @param payment_method_configuration [String?] The ID of the payment method configuration to use with this SetupIntent.
    # @optional @param payment_method_data [Stripe::PaymentMethodDataParams?]
    # @optional @param payment_method_options [Stripe::PaymentMethodOptionsParam?]
    # @optional @param payment_method_types [Array(String)?] The list of payment method types (for example, card) that this SetupIntent can set up. If you don't provide this array, it defaults to [\\\"card\\\"].
    # @return nil
    def post_setup_intents_intent(
      *,
      intent : String? = nil,
      attach_to_self : Bool? = nil,
      customer : String? = nil,
      description : String? = nil,
      expand : Array(String)? = nil,
      flow_directions : Array(String)? = nil,
      metadata : Stripe::PostAccountsRequestMetadata? = nil,
      payment_method : String? = nil,
      payment_method_configuration : String? = nil,
      payment_method_data : Stripe::PaymentMethodDataParams? = nil,
      payment_method_options : Stripe::PaymentMethodOptionsParam? = nil,
      payment_method_types : Array(String)? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_post_setup_intents_intent(intent: intent, attach_to_self: attach_to_self, customer: customer, description: description, expand: expand, flow_directions: flow_directions, metadata: metadata, payment_method: payment_method, payment_method_configuration: payment_method_configuration, payment_method_data: payment_method_data, payment_method_options: payment_method_options, payment_method_types: payment_method_types).execute(&block)
    end

    POST_SETUP_INTENTS_INTENT_MAX_LENGTH_FOR_INTENT                       = 5000
    POST_SETUP_INTENTS_INTENT_MAX_LENGTH_FOR_CUSTOMER                     = 5000
    POST_SETUP_INTENTS_INTENT_MAX_LENGTH_FOR_DESCRIPTION                  = 1000
    POST_SETUP_INTENTS_INTENT_VALID_VALUES_FOR_FLOW_DIRECTIONS            = String.static_array("inbound", "outbound")
    POST_SETUP_INTENTS_INTENT_MAX_LENGTH_FOR_PAYMENT_METHOD               = 5000
    POST_SETUP_INTENTS_INTENT_MAX_LENGTH_FOR_PAYMENT_METHOD_CONFIGURATION =  100

    # @return Crest::Request
    def build_api_request_for_post_setup_intents_intent(
      *,
      intent : String? = nil,
      attach_to_self : Bool? = nil,
      customer : String? = nil,
      description : String? = nil,
      expand : Array(String)? = nil,
      flow_directions : Array(String)? = nil,
      metadata : Stripe::PostAccountsRequestMetadata? = nil,
      payment_method : String? = nil,
      payment_method_configuration : String? = nil,
      payment_method_data : Stripe::PaymentMethodDataParams? = nil,
      payment_method_options : Stripe::PaymentMethodOptionsParam? = nil,
      payment_method_types : Array(String)? = nil
    ) : Crest::Request
      if debugging?
        Log.debug { "Calling API: SetupIntentsApi.post_setup_intents_intent ..." }
      end

      if client_side_validation?
        raise ArgumentError.new("\"intent\" is required and cannot be null") if intent.nil?
        unless (_intent = intent).nil?
          OpenApi::PrimitiveValidator.validate_max_length("intent", intent.to_s.size, POST_SETUP_INTENTS_INTENT_MAX_LENGTH_FOR_INTENT)
        end

        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, POST_SETUP_INTENTS_INTENT_MAX_LENGTH_FOR_CUSTOMER)
        end
        unless (_description = description).nil?
          OpenApi::PrimitiveValidator.validate_max_length("description", description.to_s.size, POST_SETUP_INTENTS_INTENT_MAX_LENGTH_FOR_DESCRIPTION)
        end

        unless (_flow_directions = flow_directions).nil?
          OpenApi::EnumValidator.validate("flow_directions", _flow_directions, POST_SETUP_INTENTS_INTENT_VALID_VALUES_FOR_FLOW_DIRECTIONS)
        end
        unless (_metadata = metadata).nil?
          _metadata.validate if _metadata.is_a?(OpenApi::Validatable)
        end
        unless (_payment_method = payment_method).nil?
          OpenApi::PrimitiveValidator.validate_max_length("payment_method", payment_method.to_s.size, POST_SETUP_INTENTS_INTENT_MAX_LENGTH_FOR_PAYMENT_METHOD)
        end
        unless (_payment_method_configuration = payment_method_configuration).nil?
          OpenApi::PrimitiveValidator.validate_max_length("payment_method_configuration", payment_method_configuration.to_s.size, POST_SETUP_INTENTS_INTENT_MAX_LENGTH_FOR_PAYMENT_METHOD_CONFIGURATION)
        end
        unless (_payment_method_data = payment_method_data).nil?
          _payment_method_data.validate if _payment_method_data.is_a?(OpenApi::Validatable)
        end
        unless (_payment_method_options = payment_method_options).nil?
          _payment_method_options.validate if _payment_method_options.is_a?(OpenApi::Validatable)
        end
      end

      # resource path
      local_var_path = "/v1/setup_intents/{intent}".sub("{" + "intent" + "}", URI.encode_path(intent.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = Array(Tuple(String, Crest::ParamsValue)).new
      form_params << Tuple(String, Crest::ParamsValue).new("attach_to_self", attach_to_self.to_s) if !attach_to_self.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("customer", customer.to_s) if !customer.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("description", description.to_s) if !description.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(expand.to_json), "expand")) if !expand.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(flow_directions.to_json), "flow_directions")) if !flow_directions.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(metadata.to_json), "metadata")) if !metadata.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("payment_method", payment_method.to_s) if !payment_method.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("payment_method_configuration", payment_method_configuration.to_s) if !payment_method_configuration.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(payment_method_data.to_json), "payment_method_data")) if !payment_method_data.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(payment_method_options.to_json), "payment_method_options")) if !payment_method_options.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(payment_method_types.to_json), "payment_method_types")) if !payment_method_types.nil?

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"POST",
        path: local_var_path,
        operation: "SetupIntentsApi.post_setup_intents_intent",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>You can cancel a SetupIntent object when it’s in one of these statuses: <code>requires_payment_method</code>, <code>requires_confirmation</code>, or <code>requires_action</code>. </p>  <p>After you cancel it, setup is abandoned and any operations on the SetupIntent fail with an error. You can’t cancel the SetupIntent for a Checkout Session. <a href=\"/docs/api/checkout/sessions/expire\">Expire the Checkout Session</a> instead.</p>
    # @required @param intent [String?]
    # @optional @param cancellation_reason [String?] Reason for canceling this SetupIntent. Possible values are: `abandoned`, `requested_by_customer`, or `duplicate`
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @return [Stripe::SetupIntent]
    def post_setup_intents_intent_cancel(
      *,
      intent : String? = nil,
      cancellation_reason : String? = nil,
      expand : Array(String)? = nil
    ) : Stripe::SetupIntent
      data, _status_code, _headers = post_setup_intents_intent_cancel_with_http_info(intent: intent, cancellation_reason: cancellation_reason, expand: expand)
      data
    end

    # &lt;p&gt;You can cancel a SetupIntent object when it’s in one of these statuses: &lt;code&gt;requires_payment_method&lt;/code&gt;, &lt;code&gt;requires_confirmation&lt;/code&gt;, or &lt;code&gt;requires_action&lt;/code&gt;. &lt;/p&gt;  &lt;p&gt;After you cancel it, setup is abandoned and any operations on the SetupIntent fail with an error. You can’t cancel the SetupIntent for a Checkout Session. &lt;a href&#x3D;\&quot;/docs/api/checkout/sessions/expire\&quot;&gt;Expire the Checkout Session&lt;/a&gt; instead.&lt;/p&gt;
    # @required @param intent [String?]
    # @optional @param cancellation_reason [String?] Reason for canceling this SetupIntent. Possible values are: `abandoned`, `requested_by_customer`, or `duplicate`
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @return [Tuple(Stripe::SetupIntent, Integer, Hash)] Stripe::SetupIntent, response status code and response headers
    def post_setup_intents_intent_cancel_with_http_info(
      *,
      intent : String? = nil,
      cancellation_reason : String? = nil,
      expand : Array(String)? = nil
    ) : Tuple(Stripe::SetupIntent, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_post_setup_intents_intent_cancel(intent: intent, cancellation_reason: cancellation_reason, expand: expand)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging?
        Log.debug { "API called: SetupIntentsApi#post_setup_intents_intent_cancel\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::SetupIntent.from_json(body), status_code, headers)
    end

    # &lt;p&gt;You can cancel a SetupIntent object when it’s in one of these statuses: &lt;code&gt;requires_payment_method&lt;/code&gt;, &lt;code&gt;requires_confirmation&lt;/code&gt;, or &lt;code&gt;requires_action&lt;/code&gt;. &lt;/p&gt;  &lt;p&gt;After you cancel it, setup is abandoned and any operations on the SetupIntent fail with an error. You can’t cancel the SetupIntent for a Checkout Session. &lt;a href&#x3D;\&quot;/docs/api/checkout/sessions/expire\&quot;&gt;Expire the Checkout Session&lt;/a&gt; instead.&lt;/p&gt;
    # @required @param intent [String?]
    # @optional @param cancellation_reason [String?] Reason for canceling this SetupIntent. Possible values are: `abandoned`, `requested_by_customer`, or `duplicate`
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @return nil
    def post_setup_intents_intent_cancel(
      *,
      intent : String? = nil,
      cancellation_reason : String? = nil,
      expand : Array(String)? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_post_setup_intents_intent_cancel(intent: intent, cancellation_reason: cancellation_reason, expand: expand).execute(&block)
    end

    POST_SETUP_INTENTS_INTENT_CANCEL_MAX_LENGTH_FOR_INTENT                = 5000
    POST_SETUP_INTENTS_INTENT_CANCEL_MAX_LENGTH_FOR_CANCELLATION_REASON   = 5000
    POST_SETUP_INTENTS_INTENT_CANCEL_VALID_VALUES_FOR_CANCELLATION_REASON = String.static_array("abandoned", "duplicate", "requested_by_customer")

    # @return Crest::Request
    def build_api_request_for_post_setup_intents_intent_cancel(
      *,
      intent : String? = nil,
      cancellation_reason : String? = nil,
      expand : Array(String)? = nil
    ) : Crest::Request
      if debugging?
        Log.debug { "Calling API: SetupIntentsApi.post_setup_intents_intent_cancel ..." }
      end

      if client_side_validation?
        raise ArgumentError.new("\"intent\" is required and cannot be null") if intent.nil?
        unless (_intent = intent).nil?
          OpenApi::PrimitiveValidator.validate_max_length("intent", intent.to_s.size, POST_SETUP_INTENTS_INTENT_CANCEL_MAX_LENGTH_FOR_INTENT)
        end
        unless (_cancellation_reason = cancellation_reason).nil?
          OpenApi::EnumValidator.validate("cancellation_reason", _cancellation_reason, POST_SETUP_INTENTS_INTENT_CANCEL_VALID_VALUES_FOR_CANCELLATION_REASON)
        end
      end

      # resource path
      local_var_path = "/v1/setup_intents/{intent}/cancel".sub("{" + "intent" + "}", URI.encode_path(intent.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = Array(Tuple(String, Crest::ParamsValue)).new
      form_params << Tuple(String, Crest::ParamsValue).new("cancellation_reason", cancellation_reason.to_s) if !cancellation_reason.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(expand.to_json), "expand")) if !expand.nil?

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"POST",
        path: local_var_path,
        operation: "SetupIntentsApi.post_setup_intents_intent_cancel",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Confirm that your customer intends to set up the current or provided payment method. For example, you would confirm a SetupIntent when a customer hits the “Save” button on a payment method management page on your website.</p>  <p>If the selected payment method does not require any additional steps from the customer, the SetupIntent will transition to the <code>succeeded</code> status.</p>  <p>Otherwise, it will transition to the <code>requires_action</code> status and suggest additional actions via <code>next_action</code>. If setup fails, the SetupIntent will transition to the <code>requires_payment_method</code> status or the <code>canceled</code> status if the confirmation limit is reached.</p>
    # @required @param intent [String?]
    # @optional @param confirmation_token [String?] ID of the ConfirmationToken used to confirm this SetupIntent.  If the provided ConfirmationToken contains properties that are also being provided in this request, such as `payment_method`, then the values in this request will take precedence.
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @optional @param mandate_data [Stripe::PostPaymentIntentsIntentConfirmRequestMandateData?]
    # @optional @param payment_method [String?] ID of the payment method (a PaymentMethod, Card, or saved Source object) to attach to this SetupIntent.
    # @optional @param payment_method_data [Stripe::PaymentMethodDataParams?]
    # @optional @param payment_method_options [Stripe::PaymentMethodOptionsParam?]
    # @optional @param return_url [String?] The URL to redirect your customer back to after they authenticate on the payment method's app or site. If you'd prefer to redirect to a mobile application, you can alternatively supply an application URI scheme. This parameter is only used for cards and other redirect-based payment methods.
    # @optional @param use_stripe_sdk [Bool?] Set to `true` when confirming server-side and using Stripe.js, iOS, or Android client-side SDKs to handle the next actions.
    # @return [Stripe::SetupIntent]
    def post_setup_intents_intent_confirm(
      *,
      intent : String? = nil,
      confirmation_token : String? = nil,
      expand : Array(String)? = nil,
      mandate_data : Stripe::PostPaymentIntentsIntentConfirmRequestMandateData? = nil,
      payment_method : String? = nil,
      payment_method_data : Stripe::PaymentMethodDataParams? = nil,
      payment_method_options : Stripe::PaymentMethodOptionsParam? = nil,
      return_url : String? = nil,
      use_stripe_sdk : Bool? = nil
    ) : Stripe::SetupIntent
      data, _status_code, _headers = post_setup_intents_intent_confirm_with_http_info(intent: intent, confirmation_token: confirmation_token, expand: expand, mandate_data: mandate_data, payment_method: payment_method, payment_method_data: payment_method_data, payment_method_options: payment_method_options, return_url: return_url, use_stripe_sdk: use_stripe_sdk)
      data
    end

    # &lt;p&gt;Confirm that your customer intends to set up the current or provided payment method. For example, you would confirm a SetupIntent when a customer hits the “Save” button on a payment method management page on your website.&lt;/p&gt;  &lt;p&gt;If the selected payment method does not require any additional steps from the customer, the SetupIntent will transition to the &lt;code&gt;succeeded&lt;/code&gt; status.&lt;/p&gt;  &lt;p&gt;Otherwise, it will transition to the &lt;code&gt;requires_action&lt;/code&gt; status and suggest additional actions via &lt;code&gt;next_action&lt;/code&gt;. If setup fails, the SetupIntent will transition to the &lt;code&gt;requires_payment_method&lt;/code&gt; status or the &lt;code&gt;canceled&lt;/code&gt; status if the confirmation limit is reached.&lt;/p&gt;
    # @required @param intent [String?]
    # @optional @param confirmation_token [String?] ID of the ConfirmationToken used to confirm this SetupIntent.  If the provided ConfirmationToken contains properties that are also being provided in this request, such as `payment_method`, then the values in this request will take precedence.
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @optional @param mandate_data [Stripe::PostPaymentIntentsIntentConfirmRequestMandateData?]
    # @optional @param payment_method [String?] ID of the payment method (a PaymentMethod, Card, or saved Source object) to attach to this SetupIntent.
    # @optional @param payment_method_data [Stripe::PaymentMethodDataParams?]
    # @optional @param payment_method_options [Stripe::PaymentMethodOptionsParam?]
    # @optional @param return_url [String?] The URL to redirect your customer back to after they authenticate on the payment method's app or site. If you'd prefer to redirect to a mobile application, you can alternatively supply an application URI scheme. This parameter is only used for cards and other redirect-based payment methods.
    # @optional @param use_stripe_sdk [Bool?] Set to `true` when confirming server-side and using Stripe.js, iOS, or Android client-side SDKs to handle the next actions.
    # @return [Tuple(Stripe::SetupIntent, Integer, Hash)] Stripe::SetupIntent, response status code and response headers
    def post_setup_intents_intent_confirm_with_http_info(
      *,
      intent : String? = nil,
      confirmation_token : String? = nil,
      expand : Array(String)? = nil,
      mandate_data : Stripe::PostPaymentIntentsIntentConfirmRequestMandateData? = nil,
      payment_method : String? = nil,
      payment_method_data : Stripe::PaymentMethodDataParams? = nil,
      payment_method_options : Stripe::PaymentMethodOptionsParam? = nil,
      return_url : String? = nil,
      use_stripe_sdk : Bool? = nil
    ) : Tuple(Stripe::SetupIntent, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_post_setup_intents_intent_confirm(intent: intent, confirmation_token: confirmation_token, expand: expand, mandate_data: mandate_data, payment_method: payment_method, payment_method_data: payment_method_data, payment_method_options: payment_method_options, return_url: return_url, use_stripe_sdk: use_stripe_sdk)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging?
        Log.debug { "API called: SetupIntentsApi#post_setup_intents_intent_confirm\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::SetupIntent.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Confirm that your customer intends to set up the current or provided payment method. For example, you would confirm a SetupIntent when a customer hits the “Save” button on a payment method management page on your website.&lt;/p&gt;  &lt;p&gt;If the selected payment method does not require any additional steps from the customer, the SetupIntent will transition to the &lt;code&gt;succeeded&lt;/code&gt; status.&lt;/p&gt;  &lt;p&gt;Otherwise, it will transition to the &lt;code&gt;requires_action&lt;/code&gt; status and suggest additional actions via &lt;code&gt;next_action&lt;/code&gt;. If setup fails, the SetupIntent will transition to the &lt;code&gt;requires_payment_method&lt;/code&gt; status or the &lt;code&gt;canceled&lt;/code&gt; status if the confirmation limit is reached.&lt;/p&gt;
    # @required @param intent [String?]
    # @optional @param confirmation_token [String?] ID of the ConfirmationToken used to confirm this SetupIntent.  If the provided ConfirmationToken contains properties that are also being provided in this request, such as `payment_method`, then the values in this request will take precedence.
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @optional @param mandate_data [Stripe::PostPaymentIntentsIntentConfirmRequestMandateData?]
    # @optional @param payment_method [String?] ID of the payment method (a PaymentMethod, Card, or saved Source object) to attach to this SetupIntent.
    # @optional @param payment_method_data [Stripe::PaymentMethodDataParams?]
    # @optional @param payment_method_options [Stripe::PaymentMethodOptionsParam?]
    # @optional @param return_url [String?] The URL to redirect your customer back to after they authenticate on the payment method's app or site. If you'd prefer to redirect to a mobile application, you can alternatively supply an application URI scheme. This parameter is only used for cards and other redirect-based payment methods.
    # @optional @param use_stripe_sdk [Bool?] Set to `true` when confirming server-side and using Stripe.js, iOS, or Android client-side SDKs to handle the next actions.
    # @return nil
    def post_setup_intents_intent_confirm(
      *,
      intent : String? = nil,
      confirmation_token : String? = nil,
      expand : Array(String)? = nil,
      mandate_data : Stripe::PostPaymentIntentsIntentConfirmRequestMandateData? = nil,
      payment_method : String? = nil,
      payment_method_data : Stripe::PaymentMethodDataParams? = nil,
      payment_method_options : Stripe::PaymentMethodOptionsParam? = nil,
      return_url : String? = nil,
      use_stripe_sdk : Bool? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_post_setup_intents_intent_confirm(intent: intent, confirmation_token: confirmation_token, expand: expand, mandate_data: mandate_data, payment_method: payment_method, payment_method_data: payment_method_data, payment_method_options: payment_method_options, return_url: return_url, use_stripe_sdk: use_stripe_sdk).execute(&block)
    end

    POST_SETUP_INTENTS_INTENT_CONFIRM_MAX_LENGTH_FOR_INTENT             = 5000
    POST_SETUP_INTENTS_INTENT_CONFIRM_MAX_LENGTH_FOR_CONFIRMATION_TOKEN = 5000
    POST_SETUP_INTENTS_INTENT_CONFIRM_MAX_LENGTH_FOR_PAYMENT_METHOD     = 5000

    # @return Crest::Request
    def build_api_request_for_post_setup_intents_intent_confirm(
      *,
      intent : String? = nil,
      confirmation_token : String? = nil,
      expand : Array(String)? = nil,
      mandate_data : Stripe::PostPaymentIntentsIntentConfirmRequestMandateData? = nil,
      payment_method : String? = nil,
      payment_method_data : Stripe::PaymentMethodDataParams? = nil,
      payment_method_options : Stripe::PaymentMethodOptionsParam? = nil,
      return_url : String? = nil,
      use_stripe_sdk : Bool? = nil
    ) : Crest::Request
      if debugging?
        Log.debug { "Calling API: SetupIntentsApi.post_setup_intents_intent_confirm ..." }
      end

      if client_side_validation?
        raise ArgumentError.new("\"intent\" is required and cannot be null") if intent.nil?
        unless (_intent = intent).nil?
          OpenApi::PrimitiveValidator.validate_max_length("intent", intent.to_s.size, POST_SETUP_INTENTS_INTENT_CONFIRM_MAX_LENGTH_FOR_INTENT)
        end
        unless (_confirmation_token = confirmation_token).nil?
          OpenApi::PrimitiveValidator.validate_max_length("confirmation_token", confirmation_token.to_s.size, POST_SETUP_INTENTS_INTENT_CONFIRM_MAX_LENGTH_FOR_CONFIRMATION_TOKEN)
        end

        unless (_mandate_data = mandate_data).nil?
          _mandate_data.validate if _mandate_data.is_a?(OpenApi::Validatable)
        end
        unless (_payment_method = payment_method).nil?
          OpenApi::PrimitiveValidator.validate_max_length("payment_method", payment_method.to_s.size, POST_SETUP_INTENTS_INTENT_CONFIRM_MAX_LENGTH_FOR_PAYMENT_METHOD)
        end
        unless (_payment_method_data = payment_method_data).nil?
          _payment_method_data.validate if _payment_method_data.is_a?(OpenApi::Validatable)
        end
        unless (_payment_method_options = payment_method_options).nil?
          _payment_method_options.validate if _payment_method_options.is_a?(OpenApi::Validatable)
        end
      end

      # resource path
      local_var_path = "/v1/setup_intents/{intent}/confirm".sub("{" + "intent" + "}", URI.encode_path(intent.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = Array(Tuple(String, Crest::ParamsValue)).new
      form_params << Tuple(String, Crest::ParamsValue).new("confirmation_token", confirmation_token.to_s) if !confirmation_token.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(expand.to_json), "expand")) if !expand.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(mandate_data.to_json), "mandate_data")) if !mandate_data.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("payment_method", payment_method.to_s) if !payment_method.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(payment_method_data.to_json), "payment_method_data")) if !payment_method_data.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(payment_method_options.to_json), "payment_method_options")) if !payment_method_options.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("return_url", return_url.to_s) if !return_url.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("use_stripe_sdk", use_stripe_sdk.to_s) if !use_stripe_sdk.nil?

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"POST",
        path: local_var_path,
        operation: "SetupIntentsApi.post_setup_intents_intent_confirm",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Verifies microdeposits on a SetupIntent object.</p>
    # @required @param intent [String?]
    # @optional @param amounts [Array(Int32)?] Two positive integers, in *cents*, equal to the values of the microdeposits sent to the bank account.
    # @optional @param descriptor_code [String?] A six-character code starting with SM present in the microdeposit sent to the bank account.
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @return [Stripe::SetupIntent]
    def post_setup_intents_intent_verify_microdeposits(
      *,
      intent : String? = nil,
      amounts : Array(Int32)? = nil,
      descriptor_code : String? = nil,
      expand : Array(String)? = nil
    ) : Stripe::SetupIntent
      data, _status_code, _headers = post_setup_intents_intent_verify_microdeposits_with_http_info(intent: intent, amounts: amounts, descriptor_code: descriptor_code, expand: expand)
      data
    end

    # &lt;p&gt;Verifies microdeposits on a SetupIntent object.&lt;/p&gt;
    # @required @param intent [String?]
    # @optional @param amounts [Array(Int32)?] Two positive integers, in *cents*, equal to the values of the microdeposits sent to the bank account.
    # @optional @param descriptor_code [String?] A six-character code starting with SM present in the microdeposit sent to the bank account.
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @return [Tuple(Stripe::SetupIntent, Integer, Hash)] Stripe::SetupIntent, response status code and response headers
    def post_setup_intents_intent_verify_microdeposits_with_http_info(
      *,
      intent : String? = nil,
      amounts : Array(Int32)? = nil,
      descriptor_code : String? = nil,
      expand : Array(String)? = nil
    ) : Tuple(Stripe::SetupIntent, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_post_setup_intents_intent_verify_microdeposits(intent: intent, amounts: amounts, descriptor_code: descriptor_code, expand: expand)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging?
        Log.debug { "API called: SetupIntentsApi#post_setup_intents_intent_verify_microdeposits\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::SetupIntent.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Verifies microdeposits on a SetupIntent object.&lt;/p&gt;
    # @required @param intent [String?]
    # @optional @param amounts [Array(Int32)?] Two positive integers, in *cents*, equal to the values of the microdeposits sent to the bank account.
    # @optional @param descriptor_code [String?] A six-character code starting with SM present in the microdeposit sent to the bank account.
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @return nil
    def post_setup_intents_intent_verify_microdeposits(
      *,
      intent : String? = nil,
      amounts : Array(Int32)? = nil,
      descriptor_code : String? = nil,
      expand : Array(String)? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_post_setup_intents_intent_verify_microdeposits(intent: intent, amounts: amounts, descriptor_code: descriptor_code, expand: expand).execute(&block)
    end

    POST_SETUP_INTENTS_INTENT_VERIFY_MICRODEPOSITS_MAX_LENGTH_FOR_INTENT          = 5000
    POST_SETUP_INTENTS_INTENT_VERIFY_MICRODEPOSITS_MAX_LENGTH_FOR_DESCRIPTOR_CODE = 5000

    # @return Crest::Request
    def build_api_request_for_post_setup_intents_intent_verify_microdeposits(
      *,
      intent : String? = nil,
      amounts : Array(Int32)? = nil,
      descriptor_code : String? = nil,
      expand : Array(String)? = nil
    ) : Crest::Request
      if debugging?
        Log.debug { "Calling API: SetupIntentsApi.post_setup_intents_intent_verify_microdeposits ..." }
      end

      if client_side_validation?
        raise ArgumentError.new("\"intent\" is required and cannot be null") if intent.nil?
        unless (_intent = intent).nil?
          OpenApi::PrimitiveValidator.validate_max_length("intent", intent.to_s.size, POST_SETUP_INTENTS_INTENT_VERIFY_MICRODEPOSITS_MAX_LENGTH_FOR_INTENT)
        end

        unless (_descriptor_code = descriptor_code).nil?
          OpenApi::PrimitiveValidator.validate_max_length("descriptor_code", descriptor_code.to_s.size, POST_SETUP_INTENTS_INTENT_VERIFY_MICRODEPOSITS_MAX_LENGTH_FOR_DESCRIPTOR_CODE)
        end
      end

      # resource path
      local_var_path = "/v1/setup_intents/{intent}/verify_microdeposits".sub("{" + "intent" + "}", URI.encode_path(intent.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = Array(Tuple(String, Crest::ParamsValue)).new
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(amounts.to_json), "amounts")) if !amounts.nil?
      form_params << Tuple(String, Crest::ParamsValue).new("descriptor_code", descriptor_code.to_s) if !descriptor_code.nil?
      form_params.concat(Crest::ZeroEnumeratedFlatParamsEncoder.flatten_params(JSON.parse(expand.to_json), "expand")) if !expand.nil?

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"POST",
        path: local_var_path,
        operation: "SetupIntentsApi.post_setup_intents_intent_verify_microdeposits",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end
  end
end
