#  Stripe API
#
# The Stripe REST API. Please see https://stripe.com/docs/api for more details.
#
# The version of the OpenAPI document: 2022-08-01
# Contact: dev-platform@stripe.com
# Generated by: https://openapi-generator.tech
#

require "uri"
require "../api_client"

module Stripe
  class RefundsApi
    property api_client : ApiClient

    delegate client_side_validation, debugging, to: @api_client.config

    def initialize(api_client = ApiClient.default)
      @api_client = api_client
    end

    # <p>Returns a list of all refunds you’ve previously created. The refunds are returned in sorted order, with the most recent refunds appearing first. For convenience, the 10 most recent refunds are always available by default on the charge object.</p>
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param payment_intent [String?] Only return refunds for the PaymentIntent specified by this ID.
    # @optional @param charge [String?] Only return refunds for the charge specified by this charge ID.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @optional @param created [Stripe::GetAccountsCreatedParameter?]
    # @return [Stripe::RefundList]
    def get_refunds(*, ending_before : String? = nil, starting_after : String? = nil, limit : Int64? = nil, payment_intent : String? = nil, charge : String? = nil, expand : Array(Array(String))? = nil, created : Stripe::GetAccountsCreatedParameter? = nil) : Stripe::RefundList
      data, _status_code, _headers = get_refunds_with_http_info(ending_before: ending_before, starting_after: starting_after, limit: limit, payment_intent: payment_intent, charge: charge, expand: expand, created: created)
      data
    end

    # &lt;p&gt;Returns a list of all refunds you’ve previously created. The refunds are returned in sorted order, with the most recent refunds appearing first. For convenience, the 10 most recent refunds are always available by default on the charge object.&lt;/p&gt;
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param payment_intent [String?] Only return refunds for the PaymentIntent specified by this ID.
    # @optional @param charge [String?] Only return refunds for the charge specified by this charge ID.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @optional @param created [Stripe::GetAccountsCreatedParameter?]
    # @return [Tuple(Stripe::RefundList, Integer, Hash)] Stripe::RefundList, response status code and response headers
    def get_refunds_with_http_info(*, ending_before : String? = nil, starting_after : String? = nil, limit : Int64? = nil, payment_intent : String? = nil, charge : String? = nil, expand : Array(Array(String))? = nil, created : Stripe::GetAccountsCreatedParameter? = nil) : Tuple(Stripe::RefundList, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_refunds(ending_before: ending_before, starting_after: starting_after, limit: limit, payment_intent: payment_intent, charge: charge, expand: expand, created: created)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: RefundsApi#get_refunds\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::RefundList.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Returns a list of all refunds you’ve previously created. The refunds are returned in sorted order, with the most recent refunds appearing first. For convenience, the 10 most recent refunds are always available by default on the charge object.&lt;/p&gt;
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param payment_intent [String?] Only return refunds for the PaymentIntent specified by this ID.
    # @optional @param charge [String?] Only return refunds for the charge specified by this charge ID.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @optional @param created [Stripe::GetAccountsCreatedParameter?]
    # @return nil
    def get_refunds(*, ending_before : String? = nil, starting_after : String? = nil, limit : Int64? = nil, payment_intent : String? = nil, charge : String? = nil, expand : Array(Array(String))? = nil, created : Stripe::GetAccountsCreatedParameter? = nil, &block : Crest::Response ->) : Nil
      build_api_request_for_get_refunds(ending_before: ending_before, starting_after: starting_after, limit: limit, payment_intent: payment_intent, charge: charge, expand: expand, created: created).execute(&block)
    end

    GET_REFUNDS_MAX_LENGTH_FOR_PAYMENT_INTENT = 5000

    # @return Crest::Request
    def build_api_request_for_get_refunds(*, ending_before : String? = nil, starting_after : String? = nil, limit : Int64? = nil, payment_intent : String? = nil, charge : String? = nil, expand : Array(Array(String))? = nil, created : Stripe::GetAccountsCreatedParameter? = nil) : Crest::Request
      if debugging
        Log.debug { "Calling API: RefundsApi.get_refunds ..." }
      end

      if client_side_validation
        unless (_payment_intent = payment_intent).nil?
          OpenApi::PrimitiveValidator.validate_max_length("payment_intent", payment_intent.to_s.size, GET_REFUNDS_MAX_LENGTH_FOR_PAYMENT_INTENT)
        end

        unless (_created = created).nil?
          _created.validate if _created.is_a?(OpenApi::Validatable)
        end
      end

      # resource path
      local_var_path = "/v1/refunds"

      # query parameters
      query_params = Hash(String, (String | Array(String))).new
      query_params["ending_before"] = ending_before.to_s if !ending_before.nil?
      query_params["starting_after"] = starting_after.to_s if !starting_after.nil?
      query_params["limit"] = limit.to_s if !limit.nil?
      query_params["payment_intent"] = payment_intent.to_s if !payment_intent.nil?
      query_params["charge"] = charge.to_s if !charge.nil?
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?
      query_params["created"] = created.to_s if !created.nil?

      # header parameters
      header_params = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # form parameters
      form_params = nil

      # http body (model)
      post_body = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "RefundsApi.get_refunds",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Retrieves the details of an existing refund.</p>
    # @required @param refund [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Stripe::Refund]
    def get_refunds_refund(*, refund : String? = nil, expand : Array(Array(String))? = nil) : Stripe::Refund
      data, _status_code, _headers = get_refunds_refund_with_http_info(refund: refund, expand: expand)
      data
    end

    # &lt;p&gt;Retrieves the details of an existing refund.&lt;/p&gt;
    # @required @param refund [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Tuple(Stripe::Refund, Integer, Hash)] Stripe::Refund, response status code and response headers
    def get_refunds_refund_with_http_info(*, refund : String? = nil, expand : Array(Array(String))? = nil) : Tuple(Stripe::Refund, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_refunds_refund(refund: refund, expand: expand)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: RefundsApi#get_refunds_refund\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::Refund.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Retrieves the details of an existing refund.&lt;/p&gt;
    # @required @param refund [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return nil
    def get_refunds_refund(*, refund : String? = nil, expand : Array(Array(String))? = nil, &block : Crest::Response ->) : Nil
      build_api_request_for_get_refunds_refund(refund: refund, expand: expand).execute(&block)
    end

    # @return Crest::Request
    def build_api_request_for_get_refunds_refund(*, refund : String? = nil, expand : Array(Array(String))? = nil) : Crest::Request
      if debugging
        Log.debug { "Calling API: RefundsApi.get_refunds_refund ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"refund\" is required and cannot be null") if refund.nil?
      end

      # resource path
      local_var_path = "/v1/refunds/{refund}".sub("{" + "refund" + "}", URI.encode_path(refund.to_s))

      # query parameters
      query_params = Hash(String, (String | Array(String))).new
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?

      # header parameters
      header_params = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # form parameters
      form_params = nil

      # http body (model)
      post_body = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "RefundsApi.get_refunds_refund",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Create a refund.</p>
    # @optional @param amount [Int32?] A positive integer representing how much to refund.
    # @optional @param charge [String?]
    # @optional @param currency [String?] Three-letter [ISO currency code](https://www.iso.org/iso-4217-currency-codes.html), in lowercase. Must be a [supported currency](https://stripe.com/docs/currencies).
    # @optional @param customer [String?] Customer whose customer balance to refund from.
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @optional @param instructions_email [String?] Address to send refund email, use customer email if not specified
    # @optional @param metadata [Stripe::PostAccountsRequestMetadata?]
    # @optional @param origin [String?] Origin of the refund
    # @optional @param payment_intent [String?]
    # @optional @param reason [String?]
    # @optional @param refund_application_fee [Bool?]
    # @optional @param reverse_transfer [Bool?]
    # @return [Stripe::Refund]
    def post_refunds(*, amount : Int64? = nil, charge : String? = nil, currency : String? = nil, customer : String? = nil, expand : Array(String)? = nil, instructions_email : String? = nil, metadata : Stripe::PostAccountsRequestMetadata? = nil, origin : String? = nil, payment_intent : String? = nil, reason : String? = nil, refund_application_fee : Bool? = nil, reverse_transfer : Bool? = nil) : Stripe::Refund
      data, _status_code, _headers = post_refunds_with_http_info(amount: amount, charge: charge, currency: currency, customer: customer, expand: expand, instructions_email: instructions_email, metadata: metadata, origin: origin, payment_intent: payment_intent, reason: reason, refund_application_fee: refund_application_fee, reverse_transfer: reverse_transfer)
      data
    end

    # &lt;p&gt;Create a refund.&lt;/p&gt;
    # @optional @param amount [Int32?] A positive integer representing how much to refund.
    # @optional @param charge [String?]
    # @optional @param currency [String?] Three-letter [ISO currency code](https://www.iso.org/iso-4217-currency-codes.html), in lowercase. Must be a [supported currency](https://stripe.com/docs/currencies).
    # @optional @param customer [String?] Customer whose customer balance to refund from.
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @optional @param instructions_email [String?] Address to send refund email, use customer email if not specified
    # @optional @param metadata [Stripe::PostAccountsRequestMetadata?]
    # @optional @param origin [String?] Origin of the refund
    # @optional @param payment_intent [String?]
    # @optional @param reason [String?]
    # @optional @param refund_application_fee [Bool?]
    # @optional @param reverse_transfer [Bool?]
    # @return [Tuple(Stripe::Refund, Integer, Hash)] Stripe::Refund, response status code and response headers
    def post_refunds_with_http_info(*, amount : Int64? = nil, charge : String? = nil, currency : String? = nil, customer : String? = nil, expand : Array(String)? = nil, instructions_email : String? = nil, metadata : Stripe::PostAccountsRequestMetadata? = nil, origin : String? = nil, payment_intent : String? = nil, reason : String? = nil, refund_application_fee : Bool? = nil, reverse_transfer : Bool? = nil) : Tuple(Stripe::Refund, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_post_refunds(amount: amount, charge: charge, currency: currency, customer: customer, expand: expand, instructions_email: instructions_email, metadata: metadata, origin: origin, payment_intent: payment_intent, reason: reason, refund_application_fee: refund_application_fee, reverse_transfer: reverse_transfer)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: RefundsApi#post_refunds\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::Refund.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Create a refund.&lt;/p&gt;
    # @optional @param amount [Int32?] A positive integer representing how much to refund.
    # @optional @param charge [String?]
    # @optional @param currency [String?] Three-letter [ISO currency code](https://www.iso.org/iso-4217-currency-codes.html), in lowercase. Must be a [supported currency](https://stripe.com/docs/currencies).
    # @optional @param customer [String?] Customer whose customer balance to refund from.
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @optional @param instructions_email [String?] Address to send refund email, use customer email if not specified
    # @optional @param metadata [Stripe::PostAccountsRequestMetadata?]
    # @optional @param origin [String?] Origin of the refund
    # @optional @param payment_intent [String?]
    # @optional @param reason [String?]
    # @optional @param refund_application_fee [Bool?]
    # @optional @param reverse_transfer [Bool?]
    # @return nil
    def post_refunds(*, amount : Int64? = nil, charge : String? = nil, currency : String? = nil, customer : String? = nil, expand : Array(String)? = nil, instructions_email : String? = nil, metadata : Stripe::PostAccountsRequestMetadata? = nil, origin : String? = nil, payment_intent : String? = nil, reason : String? = nil, refund_application_fee : Bool? = nil, reverse_transfer : Bool? = nil, &block : Crest::Response ->) : Nil
      build_api_request_for_post_refunds(amount: amount, charge: charge, currency: currency, customer: customer, expand: expand, instructions_email: instructions_email, metadata: metadata, origin: origin, payment_intent: payment_intent, reason: reason, refund_application_fee: refund_application_fee, reverse_transfer: reverse_transfer).execute(&block)
    end

    POST_REFUNDS_MAX_LENGTH_FOR_CHARGE         = 5000
    POST_REFUNDS_MAX_LENGTH_FOR_CUSTOMER       = 5000
    POST_REFUNDS_VALID_VALUES_FOR_ORIGIN       = String.static_array("customer_balance")
    POST_REFUNDS_MAX_LENGTH_FOR_PAYMENT_INTENT = 5000
    POST_REFUNDS_MAX_LENGTH_FOR_REASON         = 5000
    POST_REFUNDS_VALID_VALUES_FOR_REASON       = String.static_array("duplicate", "fraudulent", "requested_by_customer")

    # @return Crest::Request
    def build_api_request_for_post_refunds(*, amount : Int64? = nil, charge : String? = nil, currency : String? = nil, customer : String? = nil, expand : Array(String)? = nil, instructions_email : String? = nil, metadata : Stripe::PostAccountsRequestMetadata? = nil, origin : String? = nil, payment_intent : String? = nil, reason : String? = nil, refund_application_fee : Bool? = nil, reverse_transfer : Bool? = nil) : Crest::Request
      if debugging
        Log.debug { "Calling API: RefundsApi.post_refunds ..." }
      end

      if client_side_validation
        unless (_charge = charge).nil?
          OpenApi::PrimitiveValidator.validate_max_length("charge", charge.to_s.size, POST_REFUNDS_MAX_LENGTH_FOR_CHARGE)
        end

        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, POST_REFUNDS_MAX_LENGTH_FOR_CUSTOMER)
        end

        unless (_metadata = metadata).nil?
          _metadata.validate if _metadata.is_a?(OpenApi::Validatable)
        end
        unless (_origin = origin).nil?
          OpenApi::EnumValidator.validate("origin", _origin, POST_REFUNDS_VALID_VALUES_FOR_ORIGIN)
        end
        unless (_payment_intent = payment_intent).nil?
          OpenApi::PrimitiveValidator.validate_max_length("payment_intent", payment_intent.to_s.size, POST_REFUNDS_MAX_LENGTH_FOR_PAYMENT_INTENT)
        end
        unless (_reason = reason).nil?
          OpenApi::EnumValidator.validate("reason", _reason, POST_REFUNDS_VALID_VALUES_FOR_REASON)
        end
      end

      # resource path
      local_var_path = "/v1/refunds"

      # query parameters
      query_params = Hash(String, (String | Array(String))).new

      # header parameters
      header_params = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # form parameters
      form_params = Hash(String, (String | Array(String) | IO)).new
      form_params["amount"] = amount.to_s if !amount.nil?
      form_params["charge"] = charge.to_s if !charge.nil?
      form_params["currency"] = currency.to_s if !currency.nil?
      form_params["customer"] = customer.to_s if !customer.nil?
      form_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?
      form_params["instructions_email"] = instructions_email.to_s if !instructions_email.nil?
      form_params["metadata"] = metadata.to_s if !metadata.nil?
      form_params["origin"] = origin.to_s if !origin.nil?
      form_params["payment_intent"] = payment_intent.to_s if !payment_intent.nil?
      form_params["reason"] = reason.to_s if !reason.nil?
      form_params["refund_application_fee"] = refund_application_fee.to_s if !refund_application_fee.nil?
      form_params["reverse_transfer"] = reverse_transfer.to_s if !reverse_transfer.nil?

      # http body (model)
      post_body = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"POST",
        path: local_var_path,
        operation: "RefundsApi.post_refunds",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Updates the specified refund by setting the values of the parameters passed. Any parameters not provided will be left unchanged.</p>  <p>This request only accepts <code>metadata</code> as an argument.</p>
    # @required @param refund [String?]
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @optional @param metadata [Stripe::PostAccountsRequestMetadata?]
    # @return [Stripe::Refund]
    def post_refunds_refund(*, refund : String? = nil, expand : Array(String)? = nil, metadata : Stripe::PostAccountsRequestMetadata? = nil) : Stripe::Refund
      data, _status_code, _headers = post_refunds_refund_with_http_info(refund: refund, expand: expand, metadata: metadata)
      data
    end

    # &lt;p&gt;Updates the specified refund by setting the values of the parameters passed. Any parameters not provided will be left unchanged.&lt;/p&gt;  &lt;p&gt;This request only accepts &lt;code&gt;metadata&lt;/code&gt; as an argument.&lt;/p&gt;
    # @required @param refund [String?]
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @optional @param metadata [Stripe::PostAccountsRequestMetadata?]
    # @return [Tuple(Stripe::Refund, Integer, Hash)] Stripe::Refund, response status code and response headers
    def post_refunds_refund_with_http_info(*, refund : String? = nil, expand : Array(String)? = nil, metadata : Stripe::PostAccountsRequestMetadata? = nil) : Tuple(Stripe::Refund, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_post_refunds_refund(refund: refund, expand: expand, metadata: metadata)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: RefundsApi#post_refunds_refund\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::Refund.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Updates the specified refund by setting the values of the parameters passed. Any parameters not provided will be left unchanged.&lt;/p&gt;  &lt;p&gt;This request only accepts &lt;code&gt;metadata&lt;/code&gt; as an argument.&lt;/p&gt;
    # @required @param refund [String?]
    # @optional @param expand [Array(String)?] Specifies which fields in the response should be expanded.
    # @optional @param metadata [Stripe::PostAccountsRequestMetadata?]
    # @return nil
    def post_refunds_refund(*, refund : String? = nil, expand : Array(String)? = nil, metadata : Stripe::PostAccountsRequestMetadata? = nil, &block : Crest::Response ->) : Nil
      build_api_request_for_post_refunds_refund(refund: refund, expand: expand, metadata: metadata).execute(&block)
    end

    # @return Crest::Request
    def build_api_request_for_post_refunds_refund(*, refund : String? = nil, expand : Array(String)? = nil, metadata : Stripe::PostAccountsRequestMetadata? = nil) : Crest::Request
      if debugging
        Log.debug { "Calling API: RefundsApi.post_refunds_refund ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"refund\" is required and cannot be null") if refund.nil?

        unless (_metadata = metadata).nil?
          _metadata.validate if _metadata.is_a?(OpenApi::Validatable)
        end
      end

      # resource path
      local_var_path = "/v1/refunds/{refund}".sub("{" + "refund" + "}", URI.encode_path(refund.to_s))

      # query parameters
      query_params = Hash(String, (String | Array(String))).new

      # header parameters
      header_params = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # form parameters
      form_params = Hash(String, (String | Array(String) | IO)).new
      form_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?
      form_params["metadata"] = metadata.to_s if !metadata.nil?

      # http body (model)
      post_body = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"POST",
        path: local_var_path,
        operation: "RefundsApi.post_refunds_refund",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        query_params: query_params,
        form_params: form_params
      )
    end
  end
end
