#  Stripe API
#
# The Stripe REST API. Please see https://stripe.com/docs/api for more details.
#
# The version of the OpenAPI document: 2022-08-01
# Contact: dev-platform@stripe.com
# Generated by: https://openapi-generator.tech
#

require "uri"
require "../api_client"

module Stripe
  class CustomersApi
    property api_client : ApiClient

    delegate client_side_validation, debugging, to: @api_client.config

    def initialize(api_client = ApiClient.default)
      @api_client = api_client
    end

    # <p>Permanently deletes a customer. It cannot be undone. Also immediately cancels any active subscriptions on the customer.</p>
    # @required @param customer [String?]
    # @return [Stripe::DeletedCustomer]
    def delete_customers_customer(
      *,
      customer : String? = nil
    ) : Stripe::DeletedCustomer
      data, _status_code, _headers = delete_customers_customer_with_http_info(customer: customer)
      data
    end

    # &lt;p&gt;Permanently deletes a customer. It cannot be undone. Also immediately cancels any active subscriptions on the customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @return [Tuple(Stripe::DeletedCustomer, Integer, Hash)] Stripe::DeletedCustomer, response status code and response headers
    def delete_customers_customer_with_http_info(
      *,
      customer : String? = nil
    ) : Tuple(Stripe::DeletedCustomer, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_delete_customers_customer(customer: customer)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#delete_customers_customer\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::DeletedCustomer.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Permanently deletes a customer. It cannot be undone. Also immediately cancels any active subscriptions on the customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @return nil
    def delete_customers_customer(
      *,
      customer : String? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_delete_customers_customer(customer: customer).execute(&block)
    end

    DELETE_CUSTOMERS_CUSTOMER_MAX_LENGTH_FOR_CUSTOMER = 5000

    # @return Crest::Request
    def build_api_request_for_delete_customers_customer(
      *,
      customer : String? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.delete_customers_customer ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, DELETE_CUSTOMERS_CUSTOMER_MAX_LENGTH_FOR_CUSTOMER)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}".sub("{" + "customer" + "}", URI.encode_path(customer.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"DELETE",
        path: local_var_path,
        operation: "CustomersApi.delete_customers_customer",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Removes the currently applied discount on a customer.</p>
    # @required @param customer [String?]
    # @return [Stripe::DeletedDiscount]
    def delete_customers_customer_discount(
      *,
      customer : String? = nil
    ) : Stripe::DeletedDiscount
      data, _status_code, _headers = delete_customers_customer_discount_with_http_info(customer: customer)
      data
    end

    # &lt;p&gt;Removes the currently applied discount on a customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @return [Tuple(Stripe::DeletedDiscount, Integer, Hash)] Stripe::DeletedDiscount, response status code and response headers
    def delete_customers_customer_discount_with_http_info(
      *,
      customer : String? = nil
    ) : Tuple(Stripe::DeletedDiscount, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_delete_customers_customer_discount(customer: customer)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#delete_customers_customer_discount\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::DeletedDiscount.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Removes the currently applied discount on a customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @return nil
    def delete_customers_customer_discount(
      *,
      customer : String? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_delete_customers_customer_discount(customer: customer).execute(&block)
    end

    DELETE_CUSTOMERS_CUSTOMER_DISCOUNT_MAX_LENGTH_FOR_CUSTOMER = 5000

    # @return Crest::Request
    def build_api_request_for_delete_customers_customer_discount(
      *,
      customer : String? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.delete_customers_customer_discount ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, DELETE_CUSTOMERS_CUSTOMER_DISCOUNT_MAX_LENGTH_FOR_CUSTOMER)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/discount".sub("{" + "customer" + "}", URI.encode_path(customer.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"DELETE",
        path: local_var_path,
        operation: "CustomersApi.delete_customers_customer_discount",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Delete a specified source for a given customer.</p>
    # @required @param customer [String?]
    # @required @param id [String?]
    # @optional @param post_accounts_account_login_links_request [Stripe::PostAccountsAccountLoginLinksRequest?]
    # @return [Stripe::DeleteCustomersCustomerSourcesId200Response]
    def delete_customers_customer_sources_id(
      *,
      customer : String? = nil,
      id : String? = nil,
      post_accounts_account_login_links_request : Stripe::PostAccountsAccountLoginLinksRequest? = nil
    ) : Stripe::DeleteCustomersCustomerSourcesId200Response
      data, _status_code, _headers = delete_customers_customer_sources_id_with_http_info(customer: customer, id: id, post_accounts_account_login_links_request: post_accounts_account_login_links_request)
      data
    end

    # &lt;p&gt;Delete a specified source for a given customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param id [String?]
    # @optional @param post_accounts_account_login_links_request [Stripe::PostAccountsAccountLoginLinksRequest?]
    # @return [Tuple(Stripe::DeleteCustomersCustomerSourcesId200Response, Integer, Hash)] Stripe::DeleteCustomersCustomerSourcesId200Response, response status code and response headers
    def delete_customers_customer_sources_id_with_http_info(
      *,
      customer : String? = nil,
      id : String? = nil,
      post_accounts_account_login_links_request : Stripe::PostAccountsAccountLoginLinksRequest? = nil
    ) : Tuple(Stripe::DeleteCustomersCustomerSourcesId200Response, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_delete_customers_customer_sources_id(customer: customer, id: id, post_accounts_account_login_links_request: post_accounts_account_login_links_request)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#delete_customers_customer_sources_id\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::DeleteCustomersCustomerSourcesId200Response.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Delete a specified source for a given customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param id [String?]
    # @optional @param post_accounts_account_login_links_request [Stripe::PostAccountsAccountLoginLinksRequest?]
    # @return nil
    def delete_customers_customer_sources_id(
      *,
      customer : String? = nil,
      id : String? = nil,
      post_accounts_account_login_links_request : Stripe::PostAccountsAccountLoginLinksRequest? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_delete_customers_customer_sources_id(customer: customer, id: id, post_accounts_account_login_links_request: post_accounts_account_login_links_request).execute(&block)
    end

    DELETE_CUSTOMERS_CUSTOMER_SOURCES_ID_MAX_LENGTH_FOR_CUSTOMER = 5000

    # @return Crest::Request
    def build_api_request_for_delete_customers_customer_sources_id(
      *,
      customer : String? = nil,
      id : String? = nil,
      post_accounts_account_login_links_request : Stripe::PostAccountsAccountLoginLinksRequest? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.delete_customers_customer_sources_id ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, DELETE_CUSTOMERS_CUSTOMER_SOURCES_ID_MAX_LENGTH_FOR_CUSTOMER)
        end
        raise ArgumentError.new("\"id\" is required and cannot be null") if id.nil?

        unless (_post_accounts_account_login_links_request = post_accounts_account_login_links_request).nil?
          _post_accounts_account_login_links_request.validate if _post_accounts_account_login_links_request.is_a?(OpenApi::Validatable)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/sources/{id}".sub("{" + "customer" + "}", URI.encode_path(customer.to_s)).sub("{" + "id" + "}", URI.encode_path(id.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = @api_client.encode(body: post_accounts_account_login_links_request, content_type: header_params["Content-Type"]?) if !post_accounts_account_login_links_request.nil?

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"DELETE",
        path: local_var_path,
        operation: "CustomersApi.delete_customers_customer_sources_id",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Deletes an existing <code>TaxID</code> object.</p>
    # @required @param customer [String?]
    # @required @param id [String?]
    # @return [Stripe::DeletedTaxId]
    def delete_customers_customer_tax_ids_id(
      *,
      customer : String? = nil,
      id : String? = nil
    ) : Stripe::DeletedTaxId
      data, _status_code, _headers = delete_customers_customer_tax_ids_id_with_http_info(customer: customer, id: id)
      data
    end

    # &lt;p&gt;Deletes an existing &lt;code&gt;TaxID&lt;/code&gt; object.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param id [String?]
    # @return [Tuple(Stripe::DeletedTaxId, Integer, Hash)] Stripe::DeletedTaxId, response status code and response headers
    def delete_customers_customer_tax_ids_id_with_http_info(
      *,
      customer : String? = nil,
      id : String? = nil
    ) : Tuple(Stripe::DeletedTaxId, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_delete_customers_customer_tax_ids_id(customer: customer, id: id)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#delete_customers_customer_tax_ids_id\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::DeletedTaxId.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Deletes an existing &lt;code&gt;TaxID&lt;/code&gt; object.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param id [String?]
    # @return nil
    def delete_customers_customer_tax_ids_id(
      *,
      customer : String? = nil,
      id : String? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_delete_customers_customer_tax_ids_id(customer: customer, id: id).execute(&block)
    end

    DELETE_CUSTOMERS_CUSTOMER_TAX_IDS_ID_MAX_LENGTH_FOR_CUSTOMER = 5000

    # @return Crest::Request
    def build_api_request_for_delete_customers_customer_tax_ids_id(
      *,
      customer : String? = nil,
      id : String? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.delete_customers_customer_tax_ids_id ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, DELETE_CUSTOMERS_CUSTOMER_TAX_IDS_ID_MAX_LENGTH_FOR_CUSTOMER)
        end
        raise ArgumentError.new("\"id\" is required and cannot be null") if id.nil?
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/tax_ids/{id}".sub("{" + "customer" + "}", URI.encode_path(customer.to_s)).sub("{" + "id" + "}", URI.encode_path(id.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"DELETE",
        path: local_var_path,
        operation: "CustomersApi.delete_customers_customer_tax_ids_id",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Returns a list of your customers. The customers are returned sorted by creation date, with the most recent customers appearing first.</p>
    # @optional @param email [String?] A case-sensitive filter on the list based on the customer's `email` field. The value must be a string.
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param test_clock [String?] Provides a list of customers that are associated with the specified test clock. The response will not include customers with test clocks if this parameter is not set.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @optional @param created [Stripe::GetAccountsCreatedParameter?]
    # @return [Stripe::CustomerResourceCustomerList]
    def get_customers(
      *,
      email : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      test_clock : String? = nil,
      expand : Array(Array(String))? = nil,
      created : Stripe::GetAccountsCreatedParameter? = nil
    ) : Stripe::CustomerResourceCustomerList
      data, _status_code, _headers = get_customers_with_http_info(email: email, ending_before: ending_before, starting_after: starting_after, limit: limit, test_clock: test_clock, expand: expand, created: created)
      data
    end

    # &lt;p&gt;Returns a list of your customers. The customers are returned sorted by creation date, with the most recent customers appearing first.&lt;/p&gt;
    # @optional @param email [String?] A case-sensitive filter on the list based on the customer's `email` field. The value must be a string.
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param test_clock [String?] Provides a list of customers that are associated with the specified test clock. The response will not include customers with test clocks if this parameter is not set.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @optional @param created [Stripe::GetAccountsCreatedParameter?]
    # @return [Tuple(Stripe::CustomerResourceCustomerList, Integer, Hash)] Stripe::CustomerResourceCustomerList, response status code and response headers
    def get_customers_with_http_info(
      *,
      email : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      test_clock : String? = nil,
      expand : Array(Array(String))? = nil,
      created : Stripe::GetAccountsCreatedParameter? = nil
    ) : Tuple(Stripe::CustomerResourceCustomerList, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_customers(email: email, ending_before: ending_before, starting_after: starting_after, limit: limit, test_clock: test_clock, expand: expand, created: created)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#get_customers\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::CustomerResourceCustomerList.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Returns a list of your customers. The customers are returned sorted by creation date, with the most recent customers appearing first.&lt;/p&gt;
    # @optional @param email [String?] A case-sensitive filter on the list based on the customer's `email` field. The value must be a string.
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param test_clock [String?] Provides a list of customers that are associated with the specified test clock. The response will not include customers with test clocks if this parameter is not set.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @optional @param created [Stripe::GetAccountsCreatedParameter?]
    # @return nil
    def get_customers(
      *,
      email : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      test_clock : String? = nil,
      expand : Array(Array(String))? = nil,
      created : Stripe::GetAccountsCreatedParameter? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_get_customers(email: email, ending_before: ending_before, starting_after: starting_after, limit: limit, test_clock: test_clock, expand: expand, created: created).execute(&block)
    end

    GET_CUSTOMERS_MAX_LENGTH_FOR_EMAIL          =  512
    GET_CUSTOMERS_MAX_LENGTH_FOR_ENDING_BEFORE  = 5000
    GET_CUSTOMERS_MAX_LENGTH_FOR_STARTING_AFTER = 5000
    GET_CUSTOMERS_MAX_LENGTH_FOR_TEST_CLOCK     = 5000

    # @return Crest::Request
    def build_api_request_for_get_customers(
      *,
      email : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      test_clock : String? = nil,
      expand : Array(Array(String))? = nil,
      created : Stripe::GetAccountsCreatedParameter? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.get_customers ..." }
      end

      if client_side_validation
        unless (_email = email).nil?
          OpenApi::PrimitiveValidator.validate_max_length("email", email.to_s.size, GET_CUSTOMERS_MAX_LENGTH_FOR_EMAIL)
        end
        unless (_ending_before = ending_before).nil?
          OpenApi::PrimitiveValidator.validate_max_length("ending_before", ending_before.to_s.size, GET_CUSTOMERS_MAX_LENGTH_FOR_ENDING_BEFORE)
        end
        unless (_starting_after = starting_after).nil?
          OpenApi::PrimitiveValidator.validate_max_length("starting_after", starting_after.to_s.size, GET_CUSTOMERS_MAX_LENGTH_FOR_STARTING_AFTER)
        end

        unless (_test_clock = test_clock).nil?
          OpenApi::PrimitiveValidator.validate_max_length("test_clock", test_clock.to_s.size, GET_CUSTOMERS_MAX_LENGTH_FOR_TEST_CLOCK)
        end

        unless (_created = created).nil?
          _created.validate if _created.is_a?(OpenApi::Validatable)
        end
      end

      # resource path
      local_var_path = "/v1/customers"

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new
      query_params["email"] = email.to_s if !email.nil?
      query_params["ending_before"] = ending_before.to_s if !ending_before.nil?
      query_params["starting_after"] = starting_after.to_s if !starting_after.nil?
      query_params["limit"] = limit.to_s if !limit.nil?
      query_params["test_clock"] = test_clock.to_s if !test_clock.nil?
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?
      query_params["created"] = created.to_s if !created.nil?

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "CustomersApi.get_customers",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Retrieves a Customer object.</p>
    # @required @param customer [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Stripe::GetCustomersCustomer200Response]
    def get_customers_customer(
      *,
      customer : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Stripe::GetCustomersCustomer200Response
      data, _status_code, _headers = get_customers_customer_with_http_info(customer: customer, expand: expand)
      data
    end

    # &lt;p&gt;Retrieves a Customer object.&lt;/p&gt;
    # @required @param customer [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Tuple(Stripe::GetCustomersCustomer200Response, Integer, Hash)] Stripe::GetCustomersCustomer200Response, response status code and response headers
    def get_customers_customer_with_http_info(
      *,
      customer : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Tuple(Stripe::GetCustomersCustomer200Response, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_customers_customer(customer: customer, expand: expand)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#get_customers_customer\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::GetCustomersCustomer200Response.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Retrieves a Customer object.&lt;/p&gt;
    # @required @param customer [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return nil
    def get_customers_customer(
      *,
      customer : String? = nil,
      expand : Array(Array(String))? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_get_customers_customer(customer: customer, expand: expand).execute(&block)
    end

    GET_CUSTOMERS_CUSTOMER_MAX_LENGTH_FOR_CUSTOMER = 5000

    # @return Crest::Request
    def build_api_request_for_get_customers_customer(
      *,
      customer : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.get_customers_customer ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, GET_CUSTOMERS_CUSTOMER_MAX_LENGTH_FOR_CUSTOMER)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}".sub("{" + "customer" + "}", URI.encode_path(customer.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "CustomersApi.get_customers_customer",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Returns a list of transactions that updated the customer’s <a href=\"/docs/billing/customer/balance\">balances</a>.</p>
    # @required @param customer [String?]
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Stripe::CustomerBalanceTransactionList]
    def get_customers_customer_balance_transactions(
      *,
      customer : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      expand : Array(Array(String))? = nil
    ) : Stripe::CustomerBalanceTransactionList
      data, _status_code, _headers = get_customers_customer_balance_transactions_with_http_info(customer: customer, ending_before: ending_before, starting_after: starting_after, limit: limit, expand: expand)
      data
    end

    # &lt;p&gt;Returns a list of transactions that updated the customer’s &lt;a href&#x3D;\&quot;/docs/billing/customer/balance\&quot;&gt;balances&lt;/a&gt;.&lt;/p&gt;
    # @required @param customer [String?]
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Tuple(Stripe::CustomerBalanceTransactionList, Integer, Hash)] Stripe::CustomerBalanceTransactionList, response status code and response headers
    def get_customers_customer_balance_transactions_with_http_info(
      *,
      customer : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      expand : Array(Array(String))? = nil
    ) : Tuple(Stripe::CustomerBalanceTransactionList, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_customers_customer_balance_transactions(customer: customer, ending_before: ending_before, starting_after: starting_after, limit: limit, expand: expand)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#get_customers_customer_balance_transactions\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::CustomerBalanceTransactionList.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Returns a list of transactions that updated the customer’s &lt;a href&#x3D;\&quot;/docs/billing/customer/balance\&quot;&gt;balances&lt;/a&gt;.&lt;/p&gt;
    # @required @param customer [String?]
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return nil
    def get_customers_customer_balance_transactions(
      *,
      customer : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      expand : Array(Array(String))? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_get_customers_customer_balance_transactions(customer: customer, ending_before: ending_before, starting_after: starting_after, limit: limit, expand: expand).execute(&block)
    end

    GET_CUSTOMERS_CUSTOMER_BALANCE_TRANSACTIONS_MAX_LENGTH_FOR_CUSTOMER       = 5000
    GET_CUSTOMERS_CUSTOMER_BALANCE_TRANSACTIONS_MAX_LENGTH_FOR_ENDING_BEFORE  = 5000
    GET_CUSTOMERS_CUSTOMER_BALANCE_TRANSACTIONS_MAX_LENGTH_FOR_STARTING_AFTER = 5000

    # @return Crest::Request
    def build_api_request_for_get_customers_customer_balance_transactions(
      *,
      customer : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      expand : Array(Array(String))? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.get_customers_customer_balance_transactions ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, GET_CUSTOMERS_CUSTOMER_BALANCE_TRANSACTIONS_MAX_LENGTH_FOR_CUSTOMER)
        end
        unless (_ending_before = ending_before).nil?
          OpenApi::PrimitiveValidator.validate_max_length("ending_before", ending_before.to_s.size, GET_CUSTOMERS_CUSTOMER_BALANCE_TRANSACTIONS_MAX_LENGTH_FOR_ENDING_BEFORE)
        end
        unless (_starting_after = starting_after).nil?
          OpenApi::PrimitiveValidator.validate_max_length("starting_after", starting_after.to_s.size, GET_CUSTOMERS_CUSTOMER_BALANCE_TRANSACTIONS_MAX_LENGTH_FOR_STARTING_AFTER)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/balance_transactions".sub("{" + "customer" + "}", URI.encode_path(customer.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new
      query_params["ending_before"] = ending_before.to_s if !ending_before.nil?
      query_params["starting_after"] = starting_after.to_s if !starting_after.nil?
      query_params["limit"] = limit.to_s if !limit.nil?
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "CustomersApi.get_customers_customer_balance_transactions",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Retrieves a specific customer balance transaction that updated the customer’s <a href=\"/docs/billing/customer/balance\">balances</a>.</p>
    # @required @param customer [String?]
    # @required @param transaction [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Stripe::CustomerBalanceTransaction]
    def get_customers_customer_balance_transactions_transaction(
      *,
      customer : String? = nil,
      transaction : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Stripe::CustomerBalanceTransaction
      data, _status_code, _headers = get_customers_customer_balance_transactions_transaction_with_http_info(customer: customer, transaction: transaction, expand: expand)
      data
    end

    # &lt;p&gt;Retrieves a specific customer balance transaction that updated the customer’s &lt;a href&#x3D;\&quot;/docs/billing/customer/balance\&quot;&gt;balances&lt;/a&gt;.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param transaction [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Tuple(Stripe::CustomerBalanceTransaction, Integer, Hash)] Stripe::CustomerBalanceTransaction, response status code and response headers
    def get_customers_customer_balance_transactions_transaction_with_http_info(
      *,
      customer : String? = nil,
      transaction : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Tuple(Stripe::CustomerBalanceTransaction, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_customers_customer_balance_transactions_transaction(customer: customer, transaction: transaction, expand: expand)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#get_customers_customer_balance_transactions_transaction\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::CustomerBalanceTransaction.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Retrieves a specific customer balance transaction that updated the customer’s &lt;a href&#x3D;\&quot;/docs/billing/customer/balance\&quot;&gt;balances&lt;/a&gt;.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param transaction [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return nil
    def get_customers_customer_balance_transactions_transaction(
      *,
      customer : String? = nil,
      transaction : String? = nil,
      expand : Array(Array(String))? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_get_customers_customer_balance_transactions_transaction(customer: customer, transaction: transaction, expand: expand).execute(&block)
    end

    GET_CUSTOMERS_CUSTOMER_BALANCE_TRANSACTIONS_TRANSACTION_MAX_LENGTH_FOR_CUSTOMER = 5000

    # @return Crest::Request
    def build_api_request_for_get_customers_customer_balance_transactions_transaction(
      *,
      customer : String? = nil,
      transaction : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.get_customers_customer_balance_transactions_transaction ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, GET_CUSTOMERS_CUSTOMER_BALANCE_TRANSACTIONS_TRANSACTION_MAX_LENGTH_FOR_CUSTOMER)
        end
        raise ArgumentError.new("\"transaction\" is required and cannot be null") if transaction.nil?
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/balance_transactions/{transaction}".sub("{" + "customer" + "}", URI.encode_path(customer.to_s)).sub("{" + "transaction" + "}", URI.encode_path(transaction.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "CustomersApi.get_customers_customer_balance_transactions_transaction",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Retrieves a customer’s cash balance.</p>
    # @required @param customer [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Stripe::CashBalance]
    def get_customers_customer_cash_balance(
      *,
      customer : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Stripe::CashBalance
      data, _status_code, _headers = get_customers_customer_cash_balance_with_http_info(customer: customer, expand: expand)
      data
    end

    # &lt;p&gt;Retrieves a customer’s cash balance.&lt;/p&gt;
    # @required @param customer [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Tuple(Stripe::CashBalance, Integer, Hash)] Stripe::CashBalance, response status code and response headers
    def get_customers_customer_cash_balance_with_http_info(
      *,
      customer : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Tuple(Stripe::CashBalance, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_customers_customer_cash_balance(customer: customer, expand: expand)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#get_customers_customer_cash_balance\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::CashBalance.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Retrieves a customer’s cash balance.&lt;/p&gt;
    # @required @param customer [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return nil
    def get_customers_customer_cash_balance(
      *,
      customer : String? = nil,
      expand : Array(Array(String))? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_get_customers_customer_cash_balance(customer: customer, expand: expand).execute(&block)
    end

    GET_CUSTOMERS_CUSTOMER_CASH_BALANCE_MAX_LENGTH_FOR_CUSTOMER = 5000

    # @return Crest::Request
    def build_api_request_for_get_customers_customer_cash_balance(
      *,
      customer : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.get_customers_customer_cash_balance ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, GET_CUSTOMERS_CUSTOMER_CASH_BALANCE_MAX_LENGTH_FOR_CUSTOMER)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/cash_balance".sub("{" + "customer" + "}", URI.encode_path(customer.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "CustomersApi.get_customers_customer_cash_balance",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    #
    # @required @param customer [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Stripe::Discount]
    def get_customers_customer_discount(
      *,
      customer : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Stripe::Discount
      data, _status_code, _headers = get_customers_customer_discount_with_http_info(customer: customer, expand: expand)
      data
    end

    #
    # @required @param customer [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Tuple(Stripe::Discount, Integer, Hash)] Stripe::Discount, response status code and response headers
    def get_customers_customer_discount_with_http_info(
      *,
      customer : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Tuple(Stripe::Discount, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_customers_customer_discount(customer: customer, expand: expand)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#get_customers_customer_discount\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::Discount.from_json(body), status_code, headers)
    end

    #
    # @required @param customer [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return nil
    def get_customers_customer_discount(
      *,
      customer : String? = nil,
      expand : Array(Array(String))? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_get_customers_customer_discount(customer: customer, expand: expand).execute(&block)
    end

    GET_CUSTOMERS_CUSTOMER_DISCOUNT_MAX_LENGTH_FOR_CUSTOMER = 5000

    # @return Crest::Request
    def build_api_request_for_get_customers_customer_discount(
      *,
      customer : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.get_customers_customer_discount ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, GET_CUSTOMERS_CUSTOMER_DISCOUNT_MAX_LENGTH_FOR_CUSTOMER)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/discount".sub("{" + "customer" + "}", URI.encode_path(customer.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "CustomersApi.get_customers_customer_discount",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Returns a list of PaymentMethods for a given Customer</p>
    # @required @param _type [String?] A required filter on the list, based on the object `type` field.
    # @required @param customer [String?]
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Stripe::CustomerPaymentMethodResourceList]
    def get_customers_customer_payment_methods(
      *,
      _type : String? = nil,
      customer : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      expand : Array(Array(String))? = nil
    ) : Stripe::CustomerPaymentMethodResourceList
      data, _status_code, _headers = get_customers_customer_payment_methods_with_http_info(_type: _type, customer: customer, ending_before: ending_before, starting_after: starting_after, limit: limit, expand: expand)
      data
    end

    # &lt;p&gt;Returns a list of PaymentMethods for a given Customer&lt;/p&gt;
    # @required @param _type [String?] A required filter on the list, based on the object `type` field.
    # @required @param customer [String?]
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Tuple(Stripe::CustomerPaymentMethodResourceList, Integer, Hash)] Stripe::CustomerPaymentMethodResourceList, response status code and response headers
    def get_customers_customer_payment_methods_with_http_info(
      *,
      _type : String? = nil,
      customer : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      expand : Array(Array(String))? = nil
    ) : Tuple(Stripe::CustomerPaymentMethodResourceList, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_customers_customer_payment_methods(_type: _type, customer: customer, ending_before: ending_before, starting_after: starting_after, limit: limit, expand: expand)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#get_customers_customer_payment_methods\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::CustomerPaymentMethodResourceList.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Returns a list of PaymentMethods for a given Customer&lt;/p&gt;
    # @required @param _type [String?] A required filter on the list, based on the object `type` field.
    # @required @param customer [String?]
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return nil
    def get_customers_customer_payment_methods(
      *,
      _type : String? = nil,
      customer : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      expand : Array(Array(String))? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_get_customers_customer_payment_methods(_type: _type, customer: customer, ending_before: ending_before, starting_after: starting_after, limit: limit, expand: expand).execute(&block)
    end

    GET_CUSTOMERS_CUSTOMER_PAYMENT_METHODS_VALID_VALUES_FOR__TYPE  = String.static_array("acss_debit", "affirm", "afterpay_clearpay", "alipay", "au_becs_debit", "bacs_debit", "bancontact", "blik", "boleto", "card", "customer_balance", "eps", "fpx", "giropay", "grabpay", "ideal", "klarna", "konbini", "link", "oxxo", "p24", "paynow", "pix", "promptpay", "sepa_debit", "sofort", "us_bank_account", "wechat_pay")
    GET_CUSTOMERS_CUSTOMER_PAYMENT_METHODS_MAX_LENGTH_FOR_CUSTOMER = 5000

    # @return Crest::Request
    def build_api_request_for_get_customers_customer_payment_methods(
      *,
      _type : String? = nil,
      customer : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      expand : Array(Array(String))? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.get_customers_customer_payment_methods ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"_type\" is required and cannot be null") if _type.nil?
        unless (__type = _type).nil?
          OpenApi::EnumValidator.validate("_type", __type, GET_CUSTOMERS_CUSTOMER_PAYMENT_METHODS_VALID_VALUES_FOR__TYPE)
        end
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, GET_CUSTOMERS_CUSTOMER_PAYMENT_METHODS_MAX_LENGTH_FOR_CUSTOMER)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/payment_methods".sub("{" + "customer" + "}", URI.encode_path(customer.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new
      query_params["ending_before"] = ending_before.to_s if !ending_before.nil?
      query_params["starting_after"] = starting_after.to_s if !starting_after.nil?
      query_params["limit"] = limit.to_s if !limit.nil?
      query_params["type"] = _type.to_s if !_type.nil?
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "CustomersApi.get_customers_customer_payment_methods",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Retrieves a PaymentMethod object for a given Customer.</p>
    # @required @param customer [String?]
    # @required @param payment_method [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Stripe::PaymentMethod]
    def get_customers_customer_payment_methods_payment_method(
      *,
      customer : String? = nil,
      payment_method : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Stripe::PaymentMethod
      data, _status_code, _headers = get_customers_customer_payment_methods_payment_method_with_http_info(customer: customer, payment_method: payment_method, expand: expand)
      data
    end

    # &lt;p&gt;Retrieves a PaymentMethod object for a given Customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param payment_method [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Tuple(Stripe::PaymentMethod, Integer, Hash)] Stripe::PaymentMethod, response status code and response headers
    def get_customers_customer_payment_methods_payment_method_with_http_info(
      *,
      customer : String? = nil,
      payment_method : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Tuple(Stripe::PaymentMethod, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_customers_customer_payment_methods_payment_method(customer: customer, payment_method: payment_method, expand: expand)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#get_customers_customer_payment_methods_payment_method\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::PaymentMethod.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Retrieves a PaymentMethod object for a given Customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param payment_method [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return nil
    def get_customers_customer_payment_methods_payment_method(
      *,
      customer : String? = nil,
      payment_method : String? = nil,
      expand : Array(Array(String))? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_get_customers_customer_payment_methods_payment_method(customer: customer, payment_method: payment_method, expand: expand).execute(&block)
    end

    GET_CUSTOMERS_CUSTOMER_PAYMENT_METHODS_PAYMENT_METHOD_MAX_LENGTH_FOR_CUSTOMER       = 5000
    GET_CUSTOMERS_CUSTOMER_PAYMENT_METHODS_PAYMENT_METHOD_MAX_LENGTH_FOR_PAYMENT_METHOD = 5000

    # @return Crest::Request
    def build_api_request_for_get_customers_customer_payment_methods_payment_method(
      *,
      customer : String? = nil,
      payment_method : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.get_customers_customer_payment_methods_payment_method ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, GET_CUSTOMERS_CUSTOMER_PAYMENT_METHODS_PAYMENT_METHOD_MAX_LENGTH_FOR_CUSTOMER)
        end
        raise ArgumentError.new("\"payment_method\" is required and cannot be null") if payment_method.nil?
        unless (_payment_method = payment_method).nil?
          OpenApi::PrimitiveValidator.validate_max_length("payment_method", payment_method.to_s.size, GET_CUSTOMERS_CUSTOMER_PAYMENT_METHODS_PAYMENT_METHOD_MAX_LENGTH_FOR_PAYMENT_METHOD)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/payment_methods/{payment_method}".sub("{" + "customer" + "}", URI.encode_path(customer.to_s)).sub("{" + "payment_method" + "}", URI.encode_path(payment_method.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "CustomersApi.get_customers_customer_payment_methods_payment_method",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>List sources for a specified customer.</p>
    # @required @param customer [String?]
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param object [String?] Filter sources according to a particular object type.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Stripe::ApmsSourcesSourceList]
    def get_customers_customer_sources(
      *,
      customer : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      object : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Stripe::ApmsSourcesSourceList
      data, _status_code, _headers = get_customers_customer_sources_with_http_info(customer: customer, ending_before: ending_before, starting_after: starting_after, limit: limit, object: object, expand: expand)
      data
    end

    # &lt;p&gt;List sources for a specified customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param object [String?] Filter sources according to a particular object type.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Tuple(Stripe::ApmsSourcesSourceList, Integer, Hash)] Stripe::ApmsSourcesSourceList, response status code and response headers
    def get_customers_customer_sources_with_http_info(
      *,
      customer : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      object : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Tuple(Stripe::ApmsSourcesSourceList, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_customers_customer_sources(customer: customer, ending_before: ending_before, starting_after: starting_after, limit: limit, object: object, expand: expand)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#get_customers_customer_sources\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::ApmsSourcesSourceList.from_json(body), status_code, headers)
    end

    # &lt;p&gt;List sources for a specified customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param object [String?] Filter sources according to a particular object type.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return nil
    def get_customers_customer_sources(
      *,
      customer : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      object : String? = nil,
      expand : Array(Array(String))? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_get_customers_customer_sources(customer: customer, ending_before: ending_before, starting_after: starting_after, limit: limit, object: object, expand: expand).execute(&block)
    end

    GET_CUSTOMERS_CUSTOMER_SOURCES_MAX_LENGTH_FOR_CUSTOMER = 5000
    GET_CUSTOMERS_CUSTOMER_SOURCES_MAX_LENGTH_FOR_OBJECT   = 5000

    # @return Crest::Request
    def build_api_request_for_get_customers_customer_sources(
      *,
      customer : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      object : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.get_customers_customer_sources ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, GET_CUSTOMERS_CUSTOMER_SOURCES_MAX_LENGTH_FOR_CUSTOMER)
        end

        unless (_object = object).nil?
          OpenApi::PrimitiveValidator.validate_max_length("object", object.to_s.size, GET_CUSTOMERS_CUSTOMER_SOURCES_MAX_LENGTH_FOR_OBJECT)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/sources".sub("{" + "customer" + "}", URI.encode_path(customer.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new
      query_params["ending_before"] = ending_before.to_s if !ending_before.nil?
      query_params["starting_after"] = starting_after.to_s if !starting_after.nil?
      query_params["limit"] = limit.to_s if !limit.nil?
      query_params["object"] = object.to_s if !object.nil?
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "CustomersApi.get_customers_customer_sources",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Retrieve a specified source for a given customer.</p>
    # @required @param customer [String?]
    # @required @param id [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Stripe::PaymentSource]
    def get_customers_customer_sources_id(
      *,
      customer : String? = nil,
      id : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Stripe::PaymentSource
      data, _status_code, _headers = get_customers_customer_sources_id_with_http_info(customer: customer, id: id, expand: expand)
      data
    end

    # &lt;p&gt;Retrieve a specified source for a given customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param id [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Tuple(Stripe::PaymentSource, Integer, Hash)] Stripe::PaymentSource, response status code and response headers
    def get_customers_customer_sources_id_with_http_info(
      *,
      customer : String? = nil,
      id : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Tuple(Stripe::PaymentSource, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_customers_customer_sources_id(customer: customer, id: id, expand: expand)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#get_customers_customer_sources_id\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::PaymentSource.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Retrieve a specified source for a given customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param id [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return nil
    def get_customers_customer_sources_id(
      *,
      customer : String? = nil,
      id : String? = nil,
      expand : Array(Array(String))? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_get_customers_customer_sources_id(customer: customer, id: id, expand: expand).execute(&block)
    end

    GET_CUSTOMERS_CUSTOMER_SOURCES_ID_MAX_LENGTH_FOR_CUSTOMER = 5000
    GET_CUSTOMERS_CUSTOMER_SOURCES_ID_MAX_LENGTH_FOR_ID       =  500

    # @return Crest::Request
    def build_api_request_for_get_customers_customer_sources_id(
      *,
      customer : String? = nil,
      id : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.get_customers_customer_sources_id ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, GET_CUSTOMERS_CUSTOMER_SOURCES_ID_MAX_LENGTH_FOR_CUSTOMER)
        end
        raise ArgumentError.new("\"id\" is required and cannot be null") if id.nil?
        unless (_id = id).nil?
          OpenApi::PrimitiveValidator.validate_max_length("id", id.to_s.size, GET_CUSTOMERS_CUSTOMER_SOURCES_ID_MAX_LENGTH_FOR_ID)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/sources/{id}".sub("{" + "customer" + "}", URI.encode_path(customer.to_s)).sub("{" + "id" + "}", URI.encode_path(id.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "CustomersApi.get_customers_customer_sources_id",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Returns a list of tax IDs for a customer.</p>
    # @required @param customer [String?]
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Stripe::TaxIDsList]
    def get_customers_customer_tax_ids(
      *,
      customer : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      expand : Array(Array(String))? = nil
    ) : Stripe::TaxIDsList
      data, _status_code, _headers = get_customers_customer_tax_ids_with_http_info(customer: customer, ending_before: ending_before, starting_after: starting_after, limit: limit, expand: expand)
      data
    end

    # &lt;p&gt;Returns a list of tax IDs for a customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Tuple(Stripe::TaxIDsList, Integer, Hash)] Stripe::TaxIDsList, response status code and response headers
    def get_customers_customer_tax_ids_with_http_info(
      *,
      customer : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      expand : Array(Array(String))? = nil
    ) : Tuple(Stripe::TaxIDsList, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_customers_customer_tax_ids(customer: customer, ending_before: ending_before, starting_after: starting_after, limit: limit, expand: expand)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#get_customers_customer_tax_ids\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::TaxIDsList.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Returns a list of tax IDs for a customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @optional @param ending_before [String?] A cursor for use in pagination. `ending_before` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` in order to fetch the previous page of the list.
    # @optional @param starting_after [String?] A cursor for use in pagination. `starting_after` is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` in order to fetch the next page of the list.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return nil
    def get_customers_customer_tax_ids(
      *,
      customer : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      expand : Array(Array(String))? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_get_customers_customer_tax_ids(customer: customer, ending_before: ending_before, starting_after: starting_after, limit: limit, expand: expand).execute(&block)
    end

    GET_CUSTOMERS_CUSTOMER_TAX_IDS_MAX_LENGTH_FOR_CUSTOMER       = 5000
    GET_CUSTOMERS_CUSTOMER_TAX_IDS_MAX_LENGTH_FOR_ENDING_BEFORE  = 5000
    GET_CUSTOMERS_CUSTOMER_TAX_IDS_MAX_LENGTH_FOR_STARTING_AFTER = 5000

    # @return Crest::Request
    def build_api_request_for_get_customers_customer_tax_ids(
      *,
      customer : String? = nil,
      ending_before : String? = nil,
      starting_after : String? = nil,
      limit : Int64? = nil,
      expand : Array(Array(String))? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.get_customers_customer_tax_ids ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, GET_CUSTOMERS_CUSTOMER_TAX_IDS_MAX_LENGTH_FOR_CUSTOMER)
        end
        unless (_ending_before = ending_before).nil?
          OpenApi::PrimitiveValidator.validate_max_length("ending_before", ending_before.to_s.size, GET_CUSTOMERS_CUSTOMER_TAX_IDS_MAX_LENGTH_FOR_ENDING_BEFORE)
        end
        unless (_starting_after = starting_after).nil?
          OpenApi::PrimitiveValidator.validate_max_length("starting_after", starting_after.to_s.size, GET_CUSTOMERS_CUSTOMER_TAX_IDS_MAX_LENGTH_FOR_STARTING_AFTER)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/tax_ids".sub("{" + "customer" + "}", URI.encode_path(customer.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new
      query_params["ending_before"] = ending_before.to_s if !ending_before.nil?
      query_params["starting_after"] = starting_after.to_s if !starting_after.nil?
      query_params["limit"] = limit.to_s if !limit.nil?
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "CustomersApi.get_customers_customer_tax_ids",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Retrieves the <code>TaxID</code> object with the given identifier.</p>
    # @required @param customer [String?]
    # @required @param id [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Stripe::TaxId]
    def get_customers_customer_tax_ids_id(
      *,
      customer : String? = nil,
      id : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Stripe::TaxId
      data, _status_code, _headers = get_customers_customer_tax_ids_id_with_http_info(customer: customer, id: id, expand: expand)
      data
    end

    # &lt;p&gt;Retrieves the &lt;code&gt;TaxID&lt;/code&gt; object with the given identifier.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param id [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Tuple(Stripe::TaxId, Integer, Hash)] Stripe::TaxId, response status code and response headers
    def get_customers_customer_tax_ids_id_with_http_info(
      *,
      customer : String? = nil,
      id : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Tuple(Stripe::TaxId, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_customers_customer_tax_ids_id(customer: customer, id: id, expand: expand)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#get_customers_customer_tax_ids_id\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::TaxId.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Retrieves the &lt;code&gt;TaxID&lt;/code&gt; object with the given identifier.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param id [String?]
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return nil
    def get_customers_customer_tax_ids_id(
      *,
      customer : String? = nil,
      id : String? = nil,
      expand : Array(Array(String))? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_get_customers_customer_tax_ids_id(customer: customer, id: id, expand: expand).execute(&block)
    end

    GET_CUSTOMERS_CUSTOMER_TAX_IDS_ID_MAX_LENGTH_FOR_CUSTOMER = 5000

    # @return Crest::Request
    def build_api_request_for_get_customers_customer_tax_ids_id(
      *,
      customer : String? = nil,
      id : String? = nil,
      expand : Array(Array(String))? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.get_customers_customer_tax_ids_id ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, GET_CUSTOMERS_CUSTOMER_TAX_IDS_ID_MAX_LENGTH_FOR_CUSTOMER)
        end
        raise ArgumentError.new("\"id\" is required and cannot be null") if id.nil?
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/tax_ids/{id}".sub("{" + "customer" + "}", URI.encode_path(customer.to_s)).sub("{" + "id" + "}", URI.encode_path(id.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "CustomersApi.get_customers_customer_tax_ids_id",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Search for customers you’ve previously created using Stripe’s <a href=\"/docs/search#search-query-language\">Search Query Language</a>. Don’t use search in read-after-write flows where strict consistency is necessary. Under normal operating conditions, data is searchable in less than a minute. Occasionally, propagation of new or updated data can be up to an hour behind during outages. Search functionality is not available to merchants in India.</p>
    # @required @param query [String?] The search query string. See [search query language](https://stripe.com/docs/search#search-query-language) and the list of supported [query fields for customers](https://stripe.com/docs/search#query-fields-for-customers).
    # @optional @param page [String?] A cursor for pagination across multiple pages of results. Don't include this parameter on the first call. Use the next_page value returned in a previous response to request subsequent results.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Stripe::SearchResult]
    def get_customers_search(
      *,
      query : String? = nil,
      page : String? = nil,
      limit : Int64? = nil,
      expand : Array(Array(String))? = nil
    ) : Stripe::SearchResult
      data, _status_code, _headers = get_customers_search_with_http_info(query: query, page: page, limit: limit, expand: expand)
      data
    end

    # &lt;p&gt;Search for customers you’ve previously created using Stripe’s &lt;a href&#x3D;\&quot;/docs/search#search-query-language\&quot;&gt;Search Query Language&lt;/a&gt;. Don’t use search in read-after-write flows where strict consistency is necessary. Under normal operating conditions, data is searchable in less than a minute. Occasionally, propagation of new or updated data can be up to an hour behind during outages. Search functionality is not available to merchants in India.&lt;/p&gt;
    # @required @param query [String?] The search query string. See [search query language](https://stripe.com/docs/search#search-query-language) and the list of supported [query fields for customers](https://stripe.com/docs/search#query-fields-for-customers).
    # @optional @param page [String?] A cursor for pagination across multiple pages of results. Don't include this parameter on the first call. Use the next_page value returned in a previous response to request subsequent results.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return [Tuple(Stripe::SearchResult, Integer, Hash)] Stripe::SearchResult, response status code and response headers
    def get_customers_search_with_http_info(
      *,
      query : String? = nil,
      page : String? = nil,
      limit : Int64? = nil,
      expand : Array(Array(String))? = nil
    ) : Tuple(Stripe::SearchResult, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_get_customers_search(query: query, page: page, limit: limit, expand: expand)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#get_customers_search\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::SearchResult.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Search for customers you’ve previously created using Stripe’s &lt;a href&#x3D;\&quot;/docs/search#search-query-language\&quot;&gt;Search Query Language&lt;/a&gt;. Don’t use search in read-after-write flows where strict consistency is necessary. Under normal operating conditions, data is searchable in less than a minute. Occasionally, propagation of new or updated data can be up to an hour behind during outages. Search functionality is not available to merchants in India.&lt;/p&gt;
    # @required @param query [String?] The search query string. See [search query language](https://stripe.com/docs/search#search-query-language) and the list of supported [query fields for customers](https://stripe.com/docs/search#query-fields-for-customers).
    # @optional @param page [String?] A cursor for pagination across multiple pages of results. Don't include this parameter on the first call. Use the next_page value returned in a previous response to request subsequent results.
    # @optional @param limit [Int32?] A limit on the number of objects to be returned. Limit can range between 1 and 100, and the default is 10.
    # @optional @param expand [Array(Array(String))?] Specifies which fields in the response should be expanded.
    # @return nil
    def get_customers_search(
      *,
      query : String? = nil,
      page : String? = nil,
      limit : Int64? = nil,
      expand : Array(Array(String))? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_get_customers_search(query: query, page: page, limit: limit, expand: expand).execute(&block)
    end

    GET_CUSTOMERS_SEARCH_MAX_LENGTH_FOR_QUERY = 5000
    GET_CUSTOMERS_SEARCH_MAX_LENGTH_FOR_PAGE  = 5000

    # @return Crest::Request
    def build_api_request_for_get_customers_search(
      *,
      query : String? = nil,
      page : String? = nil,
      limit : Int64? = nil,
      expand : Array(Array(String))? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.get_customers_search ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"query\" is required and cannot be null") if query.nil?
        unless (_query = query).nil?
          OpenApi::PrimitiveValidator.validate_max_length("query", query.to_s.size, GET_CUSTOMERS_SEARCH_MAX_LENGTH_FOR_QUERY)
        end
        unless (_page = page).nil?
          OpenApi::PrimitiveValidator.validate_max_length("page", page.to_s.size, GET_CUSTOMERS_SEARCH_MAX_LENGTH_FOR_PAGE)
        end
      end

      # resource path
      local_var_path = "/v1/customers/search"

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new
      query_params["page"] = page.to_s if !page.nil?
      query_params["limit"] = limit.to_s if !limit.nil?
      query_params["expand"] = @api_client.build_collection_param(expand, "csv") if !expand.nil? && !expand.empty?
      query_params["query"] = query.to_s if !query.nil?

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = nil

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"GET",
        path: local_var_path,
        operation: "CustomersApi.get_customers_search",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Creates a new customer object.</p>
    # @optional @param post_customers_request [Stripe::PostCustomersRequest?]
    # @return [Stripe::Customer]
    def post_customers(
      *,
      post_customers_request : Stripe::PostCustomersRequest? = nil
    ) : Stripe::Customer
      data, _status_code, _headers = post_customers_with_http_info(post_customers_request: post_customers_request)
      data
    end

    # &lt;p&gt;Creates a new customer object.&lt;/p&gt;
    # @optional @param post_customers_request [Stripe::PostCustomersRequest?]
    # @return [Tuple(Stripe::Customer, Integer, Hash)] Stripe::Customer, response status code and response headers
    def post_customers_with_http_info(
      *,
      post_customers_request : Stripe::PostCustomersRequest? = nil
    ) : Tuple(Stripe::Customer, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_post_customers(post_customers_request: post_customers_request)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#post_customers\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::Customer.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Creates a new customer object.&lt;/p&gt;
    # @optional @param post_customers_request [Stripe::PostCustomersRequest?]
    # @return nil
    def post_customers(
      *,
      post_customers_request : Stripe::PostCustomersRequest? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_post_customers(post_customers_request: post_customers_request).execute(&block)
    end

    # @return Crest::Request
    def build_api_request_for_post_customers(
      *,
      post_customers_request : Stripe::PostCustomersRequest? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.post_customers ..." }
      end

      if client_side_validation
        unless (_post_customers_request = post_customers_request).nil?
          _post_customers_request.validate if _post_customers_request.is_a?(OpenApi::Validatable)
        end
      end

      # resource path
      local_var_path = "/v1/customers"

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = @api_client.encode(body: post_customers_request, content_type: header_params["Content-Type"]?) if !post_customers_request.nil?

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"POST",
        path: local_var_path,
        operation: "CustomersApi.post_customers",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Updates the specified customer by setting the values of the parameters passed. Any parameters not provided will be left unchanged. For example, if you pass the <strong>source</strong> parameter, that becomes the customer’s active source (e.g., a card) to be used for all charges in the future. When you update a customer to a new valid card source by passing the <strong>source</strong> parameter: for each of the customer’s current subscriptions, if the subscription bills automatically and is in the <code>past_due</code> state, then the latest open invoice for the subscription with automatic collection enabled will be retried. This retry will not count as an automatic retry, and will not affect the next regularly scheduled payment for the invoice. Changing the <strong>default_source</strong> for a customer will not trigger this behavior.</p>  <p>This request accepts mostly the same arguments as the customer creation call.</p>
    # @required @param customer [String?]
    # @optional @param post_customers_customer_request [Stripe::PostCustomersCustomerRequest?]
    # @return [Stripe::Customer]
    def post_customers_customer(
      *,
      customer : String? = nil,
      post_customers_customer_request : Stripe::PostCustomersCustomerRequest? = nil
    ) : Stripe::Customer
      data, _status_code, _headers = post_customers_customer_with_http_info(customer: customer, post_customers_customer_request: post_customers_customer_request)
      data
    end

    # &lt;p&gt;Updates the specified customer by setting the values of the parameters passed. Any parameters not provided will be left unchanged. For example, if you pass the &lt;strong&gt;source&lt;/strong&gt; parameter, that becomes the customer’s active source (e.g., a card) to be used for all charges in the future. When you update a customer to a new valid card source by passing the &lt;strong&gt;source&lt;/strong&gt; parameter: for each of the customer’s current subscriptions, if the subscription bills automatically and is in the &lt;code&gt;past_due&lt;/code&gt; state, then the latest open invoice for the subscription with automatic collection enabled will be retried. This retry will not count as an automatic retry, and will not affect the next regularly scheduled payment for the invoice. Changing the &lt;strong&gt;default_source&lt;/strong&gt; for a customer will not trigger this behavior.&lt;/p&gt;  &lt;p&gt;This request accepts mostly the same arguments as the customer creation call.&lt;/p&gt;
    # @required @param customer [String?]
    # @optional @param post_customers_customer_request [Stripe::PostCustomersCustomerRequest?]
    # @return [Tuple(Stripe::Customer, Integer, Hash)] Stripe::Customer, response status code and response headers
    def post_customers_customer_with_http_info(
      *,
      customer : String? = nil,
      post_customers_customer_request : Stripe::PostCustomersCustomerRequest? = nil
    ) : Tuple(Stripe::Customer, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_post_customers_customer(customer: customer, post_customers_customer_request: post_customers_customer_request)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#post_customers_customer\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::Customer.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Updates the specified customer by setting the values of the parameters passed. Any parameters not provided will be left unchanged. For example, if you pass the &lt;strong&gt;source&lt;/strong&gt; parameter, that becomes the customer’s active source (e.g., a card) to be used for all charges in the future. When you update a customer to a new valid card source by passing the &lt;strong&gt;source&lt;/strong&gt; parameter: for each of the customer’s current subscriptions, if the subscription bills automatically and is in the &lt;code&gt;past_due&lt;/code&gt; state, then the latest open invoice for the subscription with automatic collection enabled will be retried. This retry will not count as an automatic retry, and will not affect the next regularly scheduled payment for the invoice. Changing the &lt;strong&gt;default_source&lt;/strong&gt; for a customer will not trigger this behavior.&lt;/p&gt;  &lt;p&gt;This request accepts mostly the same arguments as the customer creation call.&lt;/p&gt;
    # @required @param customer [String?]
    # @optional @param post_customers_customer_request [Stripe::PostCustomersCustomerRequest?]
    # @return nil
    def post_customers_customer(
      *,
      customer : String? = nil,
      post_customers_customer_request : Stripe::PostCustomersCustomerRequest? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_post_customers_customer(customer: customer, post_customers_customer_request: post_customers_customer_request).execute(&block)
    end

    POST_CUSTOMERS_CUSTOMER_MAX_LENGTH_FOR_CUSTOMER = 5000

    # @return Crest::Request
    def build_api_request_for_post_customers_customer(
      *,
      customer : String? = nil,
      post_customers_customer_request : Stripe::PostCustomersCustomerRequest? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.post_customers_customer ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, POST_CUSTOMERS_CUSTOMER_MAX_LENGTH_FOR_CUSTOMER)
        end
        unless (_post_customers_customer_request = post_customers_customer_request).nil?
          _post_customers_customer_request.validate if _post_customers_customer_request.is_a?(OpenApi::Validatable)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}".sub("{" + "customer" + "}", URI.encode_path(customer.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = @api_client.encode(body: post_customers_customer_request, content_type: header_params["Content-Type"]?) if !post_customers_customer_request.nil?

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"POST",
        path: local_var_path,
        operation: "CustomersApi.post_customers_customer",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Creates an immutable transaction that updates the customer’s credit <a href=\"/docs/billing/customer/balance\">balance</a>.</p>
    # @required @param customer [String?]
    # @required @param post_customers_customer_balance_transactions_request [Stripe::PostCustomersCustomerBalanceTransactionsRequest?]
    # @return [Stripe::CustomerBalanceTransaction]
    def post_customers_customer_balance_transactions(
      *,
      customer : String? = nil,
      post_customers_customer_balance_transactions_request : Stripe::PostCustomersCustomerBalanceTransactionsRequest? = nil
    ) : Stripe::CustomerBalanceTransaction
      data, _status_code, _headers = post_customers_customer_balance_transactions_with_http_info(customer: customer, post_customers_customer_balance_transactions_request: post_customers_customer_balance_transactions_request)
      data
    end

    # &lt;p&gt;Creates an immutable transaction that updates the customer’s credit &lt;a href&#x3D;\&quot;/docs/billing/customer/balance\&quot;&gt;balance&lt;/a&gt;.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param post_customers_customer_balance_transactions_request [Stripe::PostCustomersCustomerBalanceTransactionsRequest?]
    # @return [Tuple(Stripe::CustomerBalanceTransaction, Integer, Hash)] Stripe::CustomerBalanceTransaction, response status code and response headers
    def post_customers_customer_balance_transactions_with_http_info(
      *,
      customer : String? = nil,
      post_customers_customer_balance_transactions_request : Stripe::PostCustomersCustomerBalanceTransactionsRequest? = nil
    ) : Tuple(Stripe::CustomerBalanceTransaction, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_post_customers_customer_balance_transactions(customer: customer, post_customers_customer_balance_transactions_request: post_customers_customer_balance_transactions_request)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#post_customers_customer_balance_transactions\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::CustomerBalanceTransaction.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Creates an immutable transaction that updates the customer’s credit &lt;a href&#x3D;\&quot;/docs/billing/customer/balance\&quot;&gt;balance&lt;/a&gt;.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param post_customers_customer_balance_transactions_request [Stripe::PostCustomersCustomerBalanceTransactionsRequest?]
    # @return nil
    def post_customers_customer_balance_transactions(
      *,
      customer : String? = nil,
      post_customers_customer_balance_transactions_request : Stripe::PostCustomersCustomerBalanceTransactionsRequest? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_post_customers_customer_balance_transactions(customer: customer, post_customers_customer_balance_transactions_request: post_customers_customer_balance_transactions_request).execute(&block)
    end

    POST_CUSTOMERS_CUSTOMER_BALANCE_TRANSACTIONS_MAX_LENGTH_FOR_CUSTOMER = 5000

    # @return Crest::Request
    def build_api_request_for_post_customers_customer_balance_transactions(
      *,
      customer : String? = nil,
      post_customers_customer_balance_transactions_request : Stripe::PostCustomersCustomerBalanceTransactionsRequest? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.post_customers_customer_balance_transactions ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, POST_CUSTOMERS_CUSTOMER_BALANCE_TRANSACTIONS_MAX_LENGTH_FOR_CUSTOMER)
        end
        raise ArgumentError.new("\"post_customers_customer_balance_transactions_request\" is required and cannot be null") if post_customers_customer_balance_transactions_request.nil?
        unless (_post_customers_customer_balance_transactions_request = post_customers_customer_balance_transactions_request).nil?
          _post_customers_customer_balance_transactions_request.validate if _post_customers_customer_balance_transactions_request.is_a?(OpenApi::Validatable)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/balance_transactions".sub("{" + "customer" + "}", URI.encode_path(customer.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = @api_client.encode(body: post_customers_customer_balance_transactions_request, content_type: header_params["Content-Type"]?) if !post_customers_customer_balance_transactions_request.nil?

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"POST",
        path: local_var_path,
        operation: "CustomersApi.post_customers_customer_balance_transactions",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Most credit balance transaction fields are immutable, but you may update its <code>description</code> and <code>metadata</code>.</p>
    # @required @param customer [String?]
    # @required @param transaction [String?]
    # @optional @param post_customers_customer_balance_transactions_transaction_request [Stripe::PostCustomersCustomerBalanceTransactionsTransactionRequest?]
    # @return [Stripe::CustomerBalanceTransaction]
    def post_customers_customer_balance_transactions_transaction(
      *,
      customer : String? = nil,
      transaction : String? = nil,
      post_customers_customer_balance_transactions_transaction_request : Stripe::PostCustomersCustomerBalanceTransactionsTransactionRequest? = nil
    ) : Stripe::CustomerBalanceTransaction
      data, _status_code, _headers = post_customers_customer_balance_transactions_transaction_with_http_info(customer: customer, transaction: transaction, post_customers_customer_balance_transactions_transaction_request: post_customers_customer_balance_transactions_transaction_request)
      data
    end

    # &lt;p&gt;Most credit balance transaction fields are immutable, but you may update its &lt;code&gt;description&lt;/code&gt; and &lt;code&gt;metadata&lt;/code&gt;.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param transaction [String?]
    # @optional @param post_customers_customer_balance_transactions_transaction_request [Stripe::PostCustomersCustomerBalanceTransactionsTransactionRequest?]
    # @return [Tuple(Stripe::CustomerBalanceTransaction, Integer, Hash)] Stripe::CustomerBalanceTransaction, response status code and response headers
    def post_customers_customer_balance_transactions_transaction_with_http_info(
      *,
      customer : String? = nil,
      transaction : String? = nil,
      post_customers_customer_balance_transactions_transaction_request : Stripe::PostCustomersCustomerBalanceTransactionsTransactionRequest? = nil
    ) : Tuple(Stripe::CustomerBalanceTransaction, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_post_customers_customer_balance_transactions_transaction(customer: customer, transaction: transaction, post_customers_customer_balance_transactions_transaction_request: post_customers_customer_balance_transactions_transaction_request)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#post_customers_customer_balance_transactions_transaction\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::CustomerBalanceTransaction.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Most credit balance transaction fields are immutable, but you may update its &lt;code&gt;description&lt;/code&gt; and &lt;code&gt;metadata&lt;/code&gt;.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param transaction [String?]
    # @optional @param post_customers_customer_balance_transactions_transaction_request [Stripe::PostCustomersCustomerBalanceTransactionsTransactionRequest?]
    # @return nil
    def post_customers_customer_balance_transactions_transaction(
      *,
      customer : String? = nil,
      transaction : String? = nil,
      post_customers_customer_balance_transactions_transaction_request : Stripe::PostCustomersCustomerBalanceTransactionsTransactionRequest? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_post_customers_customer_balance_transactions_transaction(customer: customer, transaction: transaction, post_customers_customer_balance_transactions_transaction_request: post_customers_customer_balance_transactions_transaction_request).execute(&block)
    end

    POST_CUSTOMERS_CUSTOMER_BALANCE_TRANSACTIONS_TRANSACTION_MAX_LENGTH_FOR_CUSTOMER    = 5000
    POST_CUSTOMERS_CUSTOMER_BALANCE_TRANSACTIONS_TRANSACTION_MAX_LENGTH_FOR_TRANSACTION = 5000

    # @return Crest::Request
    def build_api_request_for_post_customers_customer_balance_transactions_transaction(
      *,
      customer : String? = nil,
      transaction : String? = nil,
      post_customers_customer_balance_transactions_transaction_request : Stripe::PostCustomersCustomerBalanceTransactionsTransactionRequest? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.post_customers_customer_balance_transactions_transaction ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, POST_CUSTOMERS_CUSTOMER_BALANCE_TRANSACTIONS_TRANSACTION_MAX_LENGTH_FOR_CUSTOMER)
        end
        raise ArgumentError.new("\"transaction\" is required and cannot be null") if transaction.nil?
        unless (_transaction = transaction).nil?
          OpenApi::PrimitiveValidator.validate_max_length("transaction", transaction.to_s.size, POST_CUSTOMERS_CUSTOMER_BALANCE_TRANSACTIONS_TRANSACTION_MAX_LENGTH_FOR_TRANSACTION)
        end
        unless (_post_customers_customer_balance_transactions_transaction_request = post_customers_customer_balance_transactions_transaction_request).nil?
          _post_customers_customer_balance_transactions_transaction_request.validate if _post_customers_customer_balance_transactions_transaction_request.is_a?(OpenApi::Validatable)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/balance_transactions/{transaction}".sub("{" + "customer" + "}", URI.encode_path(customer.to_s)).sub("{" + "transaction" + "}", URI.encode_path(transaction.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = @api_client.encode(body: post_customers_customer_balance_transactions_transaction_request, content_type: header_params["Content-Type"]?) if !post_customers_customer_balance_transactions_transaction_request.nil?

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"POST",
        path: local_var_path,
        operation: "CustomersApi.post_customers_customer_balance_transactions_transaction",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Changes the settings on a customer’s cash balance.</p>
    # @required @param customer [String?]
    # @optional @param post_customers_customer_cash_balance_request [Stripe::PostCustomersCustomerCashBalanceRequest?]
    # @return [Stripe::CashBalance]
    def post_customers_customer_cash_balance(
      *,
      customer : String? = nil,
      post_customers_customer_cash_balance_request : Stripe::PostCustomersCustomerCashBalanceRequest? = nil
    ) : Stripe::CashBalance
      data, _status_code, _headers = post_customers_customer_cash_balance_with_http_info(customer: customer, post_customers_customer_cash_balance_request: post_customers_customer_cash_balance_request)
      data
    end

    # &lt;p&gt;Changes the settings on a customer’s cash balance.&lt;/p&gt;
    # @required @param customer [String?]
    # @optional @param post_customers_customer_cash_balance_request [Stripe::PostCustomersCustomerCashBalanceRequest?]
    # @return [Tuple(Stripe::CashBalance, Integer, Hash)] Stripe::CashBalance, response status code and response headers
    def post_customers_customer_cash_balance_with_http_info(
      *,
      customer : String? = nil,
      post_customers_customer_cash_balance_request : Stripe::PostCustomersCustomerCashBalanceRequest? = nil
    ) : Tuple(Stripe::CashBalance, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_post_customers_customer_cash_balance(customer: customer, post_customers_customer_cash_balance_request: post_customers_customer_cash_balance_request)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#post_customers_customer_cash_balance\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::CashBalance.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Changes the settings on a customer’s cash balance.&lt;/p&gt;
    # @required @param customer [String?]
    # @optional @param post_customers_customer_cash_balance_request [Stripe::PostCustomersCustomerCashBalanceRequest?]
    # @return nil
    def post_customers_customer_cash_balance(
      *,
      customer : String? = nil,
      post_customers_customer_cash_balance_request : Stripe::PostCustomersCustomerCashBalanceRequest? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_post_customers_customer_cash_balance(customer: customer, post_customers_customer_cash_balance_request: post_customers_customer_cash_balance_request).execute(&block)
    end

    POST_CUSTOMERS_CUSTOMER_CASH_BALANCE_MAX_LENGTH_FOR_CUSTOMER = 5000

    # @return Crest::Request
    def build_api_request_for_post_customers_customer_cash_balance(
      *,
      customer : String? = nil,
      post_customers_customer_cash_balance_request : Stripe::PostCustomersCustomerCashBalanceRequest? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.post_customers_customer_cash_balance ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, POST_CUSTOMERS_CUSTOMER_CASH_BALANCE_MAX_LENGTH_FOR_CUSTOMER)
        end
        unless (_post_customers_customer_cash_balance_request = post_customers_customer_cash_balance_request).nil?
          _post_customers_customer_cash_balance_request.validate if _post_customers_customer_cash_balance_request.is_a?(OpenApi::Validatable)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/cash_balance".sub("{" + "customer" + "}", URI.encode_path(customer.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = @api_client.encode(body: post_customers_customer_cash_balance_request, content_type: header_params["Content-Type"]?) if !post_customers_customer_cash_balance_request.nil?

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"POST",
        path: local_var_path,
        operation: "CustomersApi.post_customers_customer_cash_balance",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>When you create a new credit card, you must specify a customer or recipient on which to create it.</p>  <p>If the card’s owner has no default card, then the new card will become the default. However, if the owner already has a default, then it will not change. To change the default, you should <a href=\"/docs/api#update_customer\">update the customer</a> to have a new <code>default_source</code>.</p>
    # @required @param customer [String?]
    # @optional @param post_customers_customer_sources_request [Stripe::PostCustomersCustomerSourcesRequest?]
    # @return [Stripe::PaymentSource]
    def post_customers_customer_sources(
      *,
      customer : String? = nil,
      post_customers_customer_sources_request : Stripe::PostCustomersCustomerSourcesRequest? = nil
    ) : Stripe::PaymentSource
      data, _status_code, _headers = post_customers_customer_sources_with_http_info(customer: customer, post_customers_customer_sources_request: post_customers_customer_sources_request)
      data
    end

    # &lt;p&gt;When you create a new credit card, you must specify a customer or recipient on which to create it.&lt;/p&gt;  &lt;p&gt;If the card’s owner has no default card, then the new card will become the default. However, if the owner already has a default, then it will not change. To change the default, you should &lt;a href&#x3D;\&quot;/docs/api#update_customer\&quot;&gt;update the customer&lt;/a&gt; to have a new &lt;code&gt;default_source&lt;/code&gt;.&lt;/p&gt;
    # @required @param customer [String?]
    # @optional @param post_customers_customer_sources_request [Stripe::PostCustomersCustomerSourcesRequest?]
    # @return [Tuple(Stripe::PaymentSource, Integer, Hash)] Stripe::PaymentSource, response status code and response headers
    def post_customers_customer_sources_with_http_info(
      *,
      customer : String? = nil,
      post_customers_customer_sources_request : Stripe::PostCustomersCustomerSourcesRequest? = nil
    ) : Tuple(Stripe::PaymentSource, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_post_customers_customer_sources(customer: customer, post_customers_customer_sources_request: post_customers_customer_sources_request)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#post_customers_customer_sources\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::PaymentSource.from_json(body), status_code, headers)
    end

    # &lt;p&gt;When you create a new credit card, you must specify a customer or recipient on which to create it.&lt;/p&gt;  &lt;p&gt;If the card’s owner has no default card, then the new card will become the default. However, if the owner already has a default, then it will not change. To change the default, you should &lt;a href&#x3D;\&quot;/docs/api#update_customer\&quot;&gt;update the customer&lt;/a&gt; to have a new &lt;code&gt;default_source&lt;/code&gt;.&lt;/p&gt;
    # @required @param customer [String?]
    # @optional @param post_customers_customer_sources_request [Stripe::PostCustomersCustomerSourcesRequest?]
    # @return nil
    def post_customers_customer_sources(
      *,
      customer : String? = nil,
      post_customers_customer_sources_request : Stripe::PostCustomersCustomerSourcesRequest? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_post_customers_customer_sources(customer: customer, post_customers_customer_sources_request: post_customers_customer_sources_request).execute(&block)
    end

    POST_CUSTOMERS_CUSTOMER_SOURCES_MAX_LENGTH_FOR_CUSTOMER = 5000

    # @return Crest::Request
    def build_api_request_for_post_customers_customer_sources(
      *,
      customer : String? = nil,
      post_customers_customer_sources_request : Stripe::PostCustomersCustomerSourcesRequest? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.post_customers_customer_sources ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, POST_CUSTOMERS_CUSTOMER_SOURCES_MAX_LENGTH_FOR_CUSTOMER)
        end
        unless (_post_customers_customer_sources_request = post_customers_customer_sources_request).nil?
          _post_customers_customer_sources_request.validate if _post_customers_customer_sources_request.is_a?(OpenApi::Validatable)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/sources".sub("{" + "customer" + "}", URI.encode_path(customer.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = @api_client.encode(body: post_customers_customer_sources_request, content_type: header_params["Content-Type"]?) if !post_customers_customer_sources_request.nil?

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"POST",
        path: local_var_path,
        operation: "CustomersApi.post_customers_customer_sources",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Update a specified source for a given customer.</p>
    # @required @param customer [String?]
    # @required @param id [String?]
    # @optional @param post_customers_customer_sources_id_request [Stripe::PostCustomersCustomerSourcesIdRequest?]
    # @return [Stripe::PostCustomersCustomerSourcesId200Response]
    def post_customers_customer_sources_id(
      *,
      customer : String? = nil,
      id : String? = nil,
      post_customers_customer_sources_id_request : Stripe::PostCustomersCustomerSourcesIdRequest? = nil
    ) : Stripe::PostCustomersCustomerSourcesId200Response
      data, _status_code, _headers = post_customers_customer_sources_id_with_http_info(customer: customer, id: id, post_customers_customer_sources_id_request: post_customers_customer_sources_id_request)
      data
    end

    # &lt;p&gt;Update a specified source for a given customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param id [String?]
    # @optional @param post_customers_customer_sources_id_request [Stripe::PostCustomersCustomerSourcesIdRequest?]
    # @return [Tuple(Stripe::PostCustomersCustomerSourcesId200Response, Integer, Hash)] Stripe::PostCustomersCustomerSourcesId200Response, response status code and response headers
    def post_customers_customer_sources_id_with_http_info(
      *,
      customer : String? = nil,
      id : String? = nil,
      post_customers_customer_sources_id_request : Stripe::PostCustomersCustomerSourcesIdRequest? = nil
    ) : Tuple(Stripe::PostCustomersCustomerSourcesId200Response, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_post_customers_customer_sources_id(customer: customer, id: id, post_customers_customer_sources_id_request: post_customers_customer_sources_id_request)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#post_customers_customer_sources_id\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::PostCustomersCustomerSourcesId200Response.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Update a specified source for a given customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param id [String?]
    # @optional @param post_customers_customer_sources_id_request [Stripe::PostCustomersCustomerSourcesIdRequest?]
    # @return nil
    def post_customers_customer_sources_id(
      *,
      customer : String? = nil,
      id : String? = nil,
      post_customers_customer_sources_id_request : Stripe::PostCustomersCustomerSourcesIdRequest? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_post_customers_customer_sources_id(customer: customer, id: id, post_customers_customer_sources_id_request: post_customers_customer_sources_id_request).execute(&block)
    end

    POST_CUSTOMERS_CUSTOMER_SOURCES_ID_MAX_LENGTH_FOR_CUSTOMER = 5000
    POST_CUSTOMERS_CUSTOMER_SOURCES_ID_MAX_LENGTH_FOR_ID       = 5000

    # @return Crest::Request
    def build_api_request_for_post_customers_customer_sources_id(
      *,
      customer : String? = nil,
      id : String? = nil,
      post_customers_customer_sources_id_request : Stripe::PostCustomersCustomerSourcesIdRequest? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.post_customers_customer_sources_id ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, POST_CUSTOMERS_CUSTOMER_SOURCES_ID_MAX_LENGTH_FOR_CUSTOMER)
        end
        raise ArgumentError.new("\"id\" is required and cannot be null") if id.nil?
        unless (_id = id).nil?
          OpenApi::PrimitiveValidator.validate_max_length("id", id.to_s.size, POST_CUSTOMERS_CUSTOMER_SOURCES_ID_MAX_LENGTH_FOR_ID)
        end
        unless (_post_customers_customer_sources_id_request = post_customers_customer_sources_id_request).nil?
          _post_customers_customer_sources_id_request.validate if _post_customers_customer_sources_id_request.is_a?(OpenApi::Validatable)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/sources/{id}".sub("{" + "customer" + "}", URI.encode_path(customer.to_s)).sub("{" + "id" + "}", URI.encode_path(id.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = @api_client.encode(body: post_customers_customer_sources_id_request, content_type: header_params["Content-Type"]?) if !post_customers_customer_sources_id_request.nil?

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"POST",
        path: local_var_path,
        operation: "CustomersApi.post_customers_customer_sources_id",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Verify a specified bank account for a given customer.</p>
    # @required @param customer [String?]
    # @required @param id [String?]
    # @optional @param post_customers_customer_sources_id_verify_request [Stripe::PostCustomersCustomerSourcesIdVerifyRequest?]
    # @return [Stripe::BankAccount]
    def post_customers_customer_sources_id_verify(
      *,
      customer : String? = nil,
      id : String? = nil,
      post_customers_customer_sources_id_verify_request : Stripe::PostCustomersCustomerSourcesIdVerifyRequest? = nil
    ) : Stripe::BankAccount
      data, _status_code, _headers = post_customers_customer_sources_id_verify_with_http_info(customer: customer, id: id, post_customers_customer_sources_id_verify_request: post_customers_customer_sources_id_verify_request)
      data
    end

    # &lt;p&gt;Verify a specified bank account for a given customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param id [String?]
    # @optional @param post_customers_customer_sources_id_verify_request [Stripe::PostCustomersCustomerSourcesIdVerifyRequest?]
    # @return [Tuple(Stripe::BankAccount, Integer, Hash)] Stripe::BankAccount, response status code and response headers
    def post_customers_customer_sources_id_verify_with_http_info(
      *,
      customer : String? = nil,
      id : String? = nil,
      post_customers_customer_sources_id_verify_request : Stripe::PostCustomersCustomerSourcesIdVerifyRequest? = nil
    ) : Tuple(Stripe::BankAccount, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_post_customers_customer_sources_id_verify(customer: customer, id: id, post_customers_customer_sources_id_verify_request: post_customers_customer_sources_id_verify_request)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#post_customers_customer_sources_id_verify\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::BankAccount.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Verify a specified bank account for a given customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param id [String?]
    # @optional @param post_customers_customer_sources_id_verify_request [Stripe::PostCustomersCustomerSourcesIdVerifyRequest?]
    # @return nil
    def post_customers_customer_sources_id_verify(
      *,
      customer : String? = nil,
      id : String? = nil,
      post_customers_customer_sources_id_verify_request : Stripe::PostCustomersCustomerSourcesIdVerifyRequest? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_post_customers_customer_sources_id_verify(customer: customer, id: id, post_customers_customer_sources_id_verify_request: post_customers_customer_sources_id_verify_request).execute(&block)
    end

    POST_CUSTOMERS_CUSTOMER_SOURCES_ID_VERIFY_MAX_LENGTH_FOR_CUSTOMER = 5000
    POST_CUSTOMERS_CUSTOMER_SOURCES_ID_VERIFY_MAX_LENGTH_FOR_ID       = 5000

    # @return Crest::Request
    def build_api_request_for_post_customers_customer_sources_id_verify(
      *,
      customer : String? = nil,
      id : String? = nil,
      post_customers_customer_sources_id_verify_request : Stripe::PostCustomersCustomerSourcesIdVerifyRequest? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.post_customers_customer_sources_id_verify ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, POST_CUSTOMERS_CUSTOMER_SOURCES_ID_VERIFY_MAX_LENGTH_FOR_CUSTOMER)
        end
        raise ArgumentError.new("\"id\" is required and cannot be null") if id.nil?
        unless (_id = id).nil?
          OpenApi::PrimitiveValidator.validate_max_length("id", id.to_s.size, POST_CUSTOMERS_CUSTOMER_SOURCES_ID_VERIFY_MAX_LENGTH_FOR_ID)
        end
        unless (_post_customers_customer_sources_id_verify_request = post_customers_customer_sources_id_verify_request).nil?
          _post_customers_customer_sources_id_verify_request.validate if _post_customers_customer_sources_id_verify_request.is_a?(OpenApi::Validatable)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/sources/{id}/verify".sub("{" + "customer" + "}", URI.encode_path(customer.to_s)).sub("{" + "id" + "}", URI.encode_path(id.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = @api_client.encode(body: post_customers_customer_sources_id_verify_request, content_type: header_params["Content-Type"]?) if !post_customers_customer_sources_id_verify_request.nil?

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"POST",
        path: local_var_path,
        operation: "CustomersApi.post_customers_customer_sources_id_verify",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end

    # <p>Creates a new <code>TaxID</code> object for a customer.</p>
    # @required @param customer [String?]
    # @required @param post_customers_customer_tax_ids_request [Stripe::PostCustomersCustomerTaxIdsRequest?]
    # @return [Stripe::TaxId]
    def post_customers_customer_tax_ids(
      *,
      customer : String? = nil,
      post_customers_customer_tax_ids_request : Stripe::PostCustomersCustomerTaxIdsRequest? = nil
    ) : Stripe::TaxId
      data, _status_code, _headers = post_customers_customer_tax_ids_with_http_info(customer: customer, post_customers_customer_tax_ids_request: post_customers_customer_tax_ids_request)
      data
    end

    # &lt;p&gt;Creates a new &lt;code&gt;TaxID&lt;/code&gt; object for a customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param post_customers_customer_tax_ids_request [Stripe::PostCustomersCustomerTaxIdsRequest?]
    # @return [Tuple(Stripe::TaxId, Integer, Hash)] Stripe::TaxId, response status code and response headers
    def post_customers_customer_tax_ids_with_http_info(
      *,
      customer : String? = nil,
      post_customers_customer_tax_ids_request : Stripe::PostCustomersCustomerTaxIdsRequest? = nil
    ) : Tuple(Stripe::TaxId, Int32, Hash(String, Array(String) | String))
      request = build_api_request_for_post_customers_customer_tax_ids(customer: customer, post_customers_customer_tax_ids_request: post_customers_customer_tax_ids_request)

      body, status_code, headers = @api_client.execute_api_request(request)

      if debugging
        Log.debug { "API called: CustomersApi#post_customers_customer_tax_ids\nBody: #{body.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}" }
      end

      Tuple.new(Stripe::TaxId.from_json(body), status_code, headers)
    end

    # &lt;p&gt;Creates a new &lt;code&gt;TaxID&lt;/code&gt; object for a customer.&lt;/p&gt;
    # @required @param customer [String?]
    # @required @param post_customers_customer_tax_ids_request [Stripe::PostCustomersCustomerTaxIdsRequest?]
    # @return nil
    def post_customers_customer_tax_ids(
      *,
      customer : String? = nil,
      post_customers_customer_tax_ids_request : Stripe::PostCustomersCustomerTaxIdsRequest? = nil,
      &block : Crest::Response ->
    ) : Nil
      build_api_request_for_post_customers_customer_tax_ids(customer: customer, post_customers_customer_tax_ids_request: post_customers_customer_tax_ids_request).execute(&block)
    end

    POST_CUSTOMERS_CUSTOMER_TAX_IDS_MAX_LENGTH_FOR_CUSTOMER = 5000

    # @return Crest::Request
    def build_api_request_for_post_customers_customer_tax_ids(
      *,
      customer : String? = nil,
      post_customers_customer_tax_ids_request : Stripe::PostCustomersCustomerTaxIdsRequest? = nil
    ) : Crest::Request
      if debugging
        Log.debug { "Calling API: CustomersApi.post_customers_customer_tax_ids ..." }
      end

      if client_side_validation
        raise ArgumentError.new("\"customer\" is required and cannot be null") if customer.nil?
        unless (_customer = customer).nil?
          OpenApi::PrimitiveValidator.validate_max_length("customer", customer.to_s.size, POST_CUSTOMERS_CUSTOMER_TAX_IDS_MAX_LENGTH_FOR_CUSTOMER)
        end
        raise ArgumentError.new("\"post_customers_customer_tax_ids_request\" is required and cannot be null") if post_customers_customer_tax_ids_request.nil?
        unless (_post_customers_customer_tax_ids_request = post_customers_customer_tax_ids_request).nil?
          _post_customers_customer_tax_ids_request.validate if _post_customers_customer_tax_ids_request.is_a?(OpenApi::Validatable)
        end
      end

      # resource path
      local_var_path = "/v1/customers/{customer}/tax_ids".sub("{" + "customer" + "}", URI.encode_path(customer.to_s))

      # header parameters
      header_params : Hash(String, String) = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/x-www-form-urlencoded"])

      # cookie parameters
      cookie_params : Hash(String, String) = Hash(String, String).new

      # query parameters
      query_params : Hash(String, (String | Array(String) | JSON::Any)) = Hash(String, (String | Array(String) | JSON::Any)).new

      # form parameters
      form_params : Array(Tuple(String, Crest::ParamsValue)) | Nil = nil

      # http body (model)
      post_body : IO | String | Nil = @api_client.encode(body: post_customers_customer_tax_ids_request, content_type: header_params["Content-Type"]?) if !post_customers_customer_tax_ids_request.nil?

      # auth_names
      auth_names = ["basicAuth", "bearerAuth"]

      @api_client.build_api_request(
        http_method: :"POST",
        path: local_var_path,
        operation: "CustomersApi.post_customers_customer_tax_ids",
        post_body: post_body,
        auth_names: auth_names,
        header_params: header_params,
        cookie_params: cookie_params,
        query_params: query_params,
        form_params: form_params
      )
    end
  end
end
